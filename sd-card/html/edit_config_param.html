<!DOCTYPE html>
<html lang="en" xml:lang="en">
<head>
	<meta charset="UTF-8">
	<title>Configuration</title>

	<style>
		h1 {font-size: 1.8em;}
		h2 {font-size: 1.5em; margin-block-start: 0.0em; margin-block-end: 0.2em;}
		h3 {font-size: 1.2em;}
		h4 {font-size: 1.0em; background-color: lightgray; padding: 5px; margin: 10px 0px 3px 0px;}
		h5 {font-size: 0.83em; margin-top: 0.2em; margin-bottom: 0;}
		p {font-size: 1em;}

		body, html {
			font-size: 100%;
			text-size-adjust: 100%;
			-webkit-text-size-adjust: 100%;
		}

		.table {
			border: 0pt;
			border-collapse: collapse;
			table-layout: fixed;
			width:660px;
			margin-block-start: 10px;
		}

		th {
			vertical-align: middle;
			text-align: left;
			font-size: 1em;
			background-color: lightgray;
			padding: 5px;
		}

		td {
			padding: 10px;
			vertical-align: middle;
		}

		.button {
			padding: 5px 10px;
			width: 220px;
			font-size: 1em;	
		}

		input[type=number] {
			width: 60px;
			min-width: 60px;
			max-width: 60px;
			margin-right: 10px;
			padding: 3px 5px;
			display: inline-block;
			border: 1px solid #ccc;
			font-size: 1em;
			vertical-align: middle;
		}

		input[type=text] {
			width: 96%;
			min-width:240px;
			max-width:96%;
			margin-right: 10px;
			padding: 3px 5px;
			display: inline-block;
			border: 1px solid #ccc;
			font-size: 1em;
			vertical-align: middle;
		}

		select {
			min-width: 72px;
			max-width: 100%;
			padding: 3px 5px;
			display: inline-block;
			border: 1px solid #ccc;
			font-size: 1em; 
			margin-right: 10px;
			vertical-align: middle;
		}

		.select_large {
			width: 100%;
			min-width: 250px;
			max-width: 100%;
			padding: 3px 5px;
			display: inline-block;
			border: 1px solid #ccc;
			font-size: 1em; 
			margin-right: 10px;
			vertical-align: middle;
		}

		textarea {
			font-size: 14px;
		}

		.description {
			color: black;
			font-size: 80%;
		}

		.disabled {
			color:rgb(122, 122, 122);
		}

		#GPIO_LEDColor_value1 #GPIO_LEDColor_value2 #GPIO_LEDColor_value3 {
			width: 30px;
			font-size: 1em;
		}

		.invalid-input {
			background-color: #FFAA00;
		}

		input:out-of-range {
			background-color: rgba(255, 0, 0, 0.25);
			border: 1px solid red;
		}

		input:invalid {
			background-color: rgba(255, 0, 0, 0.25);
			border: 1px solid red;
		}

		.hidden {
			display: none;
		}

		.expert {
			background-color: #ffefef;
			font-size: 1em;
		}

		.indent1 {
			padding-left: 25px;
			font-size: 1em;
		}

		.indent2 {
			padding-left: 50px;
			font-size: 1em;
		}

		.tooltip {
			position: relative;
			display: inline-block;
		}

		.tooltip .tooltiptext {
			visibility: hidden;
			min-width: 600px;
			max-width: 600px;
			width: 600px;
			background-color: #dfdfdf;

			padding-top: 5px;
			padding-bottom: 10px;
			padding-left: 10px;
			padding-right: 10px;

			border: solid black 1px; 

			/* Position the tooltip */
			position: absolute;
			z-index: 1;
			top: 100%;
			left: 100%;
			margin-left: -600px;
		}

		.tooltip:hover .tooltiptext {
			visibility: visible;
		}

		.tooltip .tooltiptext table {
			border-collapse: collapse;
		}

		.tooltip .tooltiptext table th, .tooltip .tooltiptext table td {
			border: 1px solid darkgray;
			padding: 5px;
		}

		.tooltip .tooltiptext h1 { /* Tooltip headline, e.g. parameter name */
			font-size: 1.5em;
			margin-top: 0.2em !important; 
			margin-bottom: 0.3em !important;
		}

		.tooltip .tooltiptext h2 { /* Tooltip sub-headline, e.g. description*/
			font-size: 1.2em;
			margin-top: 1em !important; 
			margin-bottom: 0.3em !important;
		}

		.tooltip .tooltiptext h3 { 
			font-size: 1.05em;
			margin-top: 1em !important; 
			margin-bottom: 0.3em !important;
		}

		.tooltip .tooltiptext h4 { 
			font-size: 0.83em;
			margin-top: 1em !important; 
			margin-bottom: 0.3em !important;
		}

		.tooltip .tooltiptext p {
			margin-top: 0.3em !important; 
			margin-bottom: 0.3em !important;
		}

		.tooltip-content {
			width: calc(100% - 2px);
			height: calc(100% - 2px);
			padding: 1px;
		}

		details {
				text-align: justify;
				font-size: 1em;
				margin-right: 10px;
		}
	</style>

	<link rel="stylesheet" href="mkdocs_theme.css?v=$COMMIT_HASH">
	<link rel="stylesheet" href="mkdocs_theme_extra.css?v=$COMMIT_HASH">
    <script src="jquery-3.6.0.min.js?v=$COMMIT_HASH"></script>
    <link href="firework.css?v=$COMMIT_HASH" rel="stylesheet">
    <script src="firework.js?v=$COMMIT_HASH"></script>
</head>

<body style="font-family: arial; padding: 0px 10px; width:660px; max-width:660px;">
	<h2>Configuration</h2>

	<details id="desc_details">
        <summary><b>CLICK HERE</b> for usage description.
        </summary>
		<p>
			This page lists all available configuration parameters of the device. 
			The description of each parameter can be shown by hovering over or by clicking the 
			<img src="help.png" width="16"> icon.
		</p>
		<p>	
			The page gets opened with the default view which should be sufficient for regular configuration tasks. 
			Enabling the <b>"Expert View"</b> some expert parameters (light red background color) will be added to
			the parameter list. Additionally the button <b>"Edit "Config.ini" File"</b> to edit the underlaying 
			configuration file (config.ini) manually is now shown on top of the page. This function should be only 
			used for special cases.
		</p>
		<p>
			Sections (entire functionality) or single parameters having a checkbox can be enabled or disabled.
			Disabling results in a disabled functionality.
		</p>
		<p>
			Don't forget to save the changes with the button <b>"Save And Apply"</b> at the bottom of this page. 
            The new configuration gets automatically applied. No reboot is required.
		</p>
    </details>
    <hr>

<div id="divall" style="display:none">

	<!-- Configuration View -->
	<table class="table">
        <colgroup>
            <col span="1" style="width:290px">
            <col span="1" style="width:300px;">
            <col span="1">
        </colgroup>

		<tr>
            <th colspan="3">Configuration View</th>
		</tr> 
		<tr>
			<td class="indent1">
				<input style="margin-top:12px;margin-bottom:12px" type="checkbox" id="ExpertModus_enabled" value="1"  onclick='UpdateExpertModus()' >
					<label for="ExpertModus_enabled">Expert View</label> 
			</td>
			<td>
				<button style="display:none;" class="button" id="Edit_Config_Direct" onclick="editConfigDirect()">Edit "Config.ini" File</button>
			</td>
			<td></td>
		</tr>
	</table>


	<!-- Take Image -->
	<table class="table">
		<colgroup>
			<col span="1" style="width:290px">
			<col span="1" style="width:300px;">
			<col span="1">
		</colgroup>

		<tr>
			<th colspan="3">Take Image</th>
		</tr> 

		<tr class="expert">
			<td class="indent1">
				<input type="checkbox" id="TakeImage_RawImagesLocation_enabled" value="1" onclick='InvertEnableItem("TakeImage", "RawImagesLocation")'  >
				<label for=TakeImage_RawImagesLocation_enabled><span id="TakeImage_RawImagesLocation_text" style="color:black;">Raw Images Location</span></label>
			</td>
			<td>
				<input required type="text" name="name" id="TakeImage_RawImagesLocation_value1">
			</td>
			<td>$TOOLTIP_TakeImage_RawImagesLocation</td>
		</tr>

		<tr class="expert">
			<td class="indent1">
				<input type="checkbox" id="TakeImage_RawImagesRetention_enabled" value="1" onclick='InvertEnableItem("TakeImage", "RawImagesRetention")'  >
				<label for=TakeImage_RawImagesRetention_enabled><span id="TakeImage_RawImagesRetention_text" style="color:black;">Raw Images Retention</span></label>
			</td>
			<td>
				<input required type="number" id="TakeImage_RawImagesRetention_value1"  min="0" step="1"
					oninput="(!validity.rangeUnderflow||(value=0)) && (!validity.stepMismatch||(value=parseInt(this.value)));">Days
			</td>
			<td>$TOOLTIP_TakeImage_RawImagesRetention</td>
		</tr>

		<tr class="expert">		
			<td class="indent1">
				<span id="TakeImage_WaitBeforeTakingPicture_text" style="color:black;">Flash Duration</span>
			</td>
			<td>
				<input required type="number" id="TakeImage_WaitBeforeTakingPicture_value1"  min="0" step="any"
					oninput="(!validity.rangeUnderflow||(value=0));">Seconds
			</td>
			<td>$TOOLTIP_TakeImage_WaitBeforeTakingPicture</td>
		</tr>

		<tr class="expert">
			<td class="indent1">
				<span id="TakeImage_CameraFrequency_text" style="color:black;">Camera Frequency</span>
			</td>
			<td>
				<select id="TakeImage_CameraFrequency_value1">
					<option value="20" selected>20 Mhz</option>
					<option value="16" >16 Mhz</option>
					<option value="10" >10 Mhz</option>
					<option value="8" >8 Mhz</option>
				</select>
			</td>
			<td>$TOOLTIP_TakeImage_CameraFrequency</td>
		</tr>

		<tr class="expert">
			<td class="indent1">
				<span id="TakeImage_ImageQuality_text" style="color:black;">Image Quality</span>
			</td>
			<td>
				<input required type="number" id="TakeImage_ImageQuality_value1"  min="8" max="63"
					oninput="(!validity.rangeUnderflow||(value=8)) && (!validity.rangeOverflow||(value=63)) && 
						(!validity.stepMismatch||(value=parseInt(this.value)));">
			</td>
			<td>$TOOLTIP_TakeImage_ImageQuality</td>
		</tr>

		<tr class="expert">
			<td class="indent1">
				<span id="TakeImage_ImageSize_text" style="color:black;">Image Size</span>
			</td>
			<td>
				<select id="TakeImage_ImageSize_value1">
					<option value="VGA" selected>VGA</option>
					<option value="QVGA" >QVGA</option>
				</select>
			</td>
			<td>$TOOLTIP_TakeImage_ImageSize</td>
		</tr>

		<tr>
			<td class="indent1">
				<span id="TakeImage_LEDIntensity_text" style="color:black;">LED Intensity</span>
			</td>
			<td>
				<input required type="number" id="TakeImage_LEDIntensity_value1"  min="0" max="100"
					oninput="(!validity.rangeUnderflow||(value=0)) && (!validity.rangeOverflow||(value=100)) && 
						(!validity.stepMismatch||(value=parseInt(this.value)));">
			</td>
			<td>$TOOLTIP_TakeImage_LEDIntensity</td>
		</tr>

		<tr>
			<td class="indent1">
				<span id="TakeImage_Brightness_text" style="color:black;">Brightness</span>
			</td>
			<td>
				<input required type="number" id="TakeImage_Brightness_value1"  min="-2" max="2"
					oninput="(!validity.rangeUnderflow||(value=-2)) && (!validity.rangeOverflow||(value=2)) && 
						(!validity.stepMismatch||(value=parseInt(this.value)));">
			</td>
			<td>$TOOLTIP_TakeImage_Brightness</td>
		</tr>

		<tr>
			<td class="indent1">
				<span id="TakeImage_Contrast_text" style="color:black;">Contrast</span>
			</td>
			<td>
				<input required type="number" id="TakeImage_Contrast_value1"  min="-2" max="2"
					oninput="(!validity.rangeUnderflow||(value=-2)) && (!validity.rangeOverflow||(value=2)) && 
						(!validity.stepMismatch||(value=parseInt(this.value)));">
			</td>
			<td>$TOOLTIP_TakeImage_Contrast</td>
		</tr>

		<tr>
			<td class="indent1">
				<span id="TakeImage_Saturation_text" style="color:black;">Saturation</span>
			</td>
			<td>
				<input required type="number" id="TakeImage_Saturation_value1"  min="-2" max="2"
					oninput="(!validity.rangeUnderflow||(value=-2)) && (!validity.rangeOverflow||(value=2)) && 
						(!validity.stepMismatch||(value=parseInt(this.value)));">
			</td>
			<td>$TOOLTIP_TakeImage_Saturation</td>
		</tr>
		
		<tr class="expert">
			<td class="indent1">
				<span id="TakeImage_FixedExposure_text" style="color:black;">Fixed Exposure</span>
			</td>
			<td>
				<select id="TakeImage_FixedExposure_value1">
					<option value="true" selected>true</option>
					<option value="false" >false</option>
				</select>
			</td>
			<td>$TOOLTIP_TakeImage_FixedExposure</td>
		</tr>

		<tr class="expert">
			<td class="indent1">
				<span id="TakeImage_Demo_text" style="color:black;">Demo Mode</span>
			</td>
			<td>
				<select id="TakeImage_Demo_value1">
					<option value="true">true</option>
					<option value="false" selected>false</option>
				</select>
			</td>
			<td>$TOOLTIP_TakeImage_Demo</td>
		</tr>
	</table>


	<!-- Alignment -->
	<table class="table">
		<colgroup>
			<col span="1" style="width:290px">
			<col span="1" style="width:300px;">
			<col span="1">
		</colgroup>

		<tr>
			<th colspan="3">Alignment</th>
		</tr>

		<tr>
			<td class="indent1">
				<span id="Alignment_AlignmentAlgo_text" style="color:black;">Alignment Algorithm</span>
			</td>
			<td>
				<select id="Alignment_AlignmentAlgo_value1">
					<option value="default" selected>Rotation + Default Algo</option>
					<option value="highAccuracy" >Rotation + High Accuracy Algo</option>
					<option value="fast" >Rotation + Fast Algo</option>
					<option value="rotation" >Only Rotation</option>
					<option value="off" >Off</option>
				</select>
			</td>
			<td>$TOOLTIP_Alignment_AlignmentAlgo</td>
		</tr>
		
		<tr class="expert">
			<td class="indent1">
			    <span id="Alignment_SearchFieldX_text" style="color:black;">Search Field X</span>
			</td>
			<td>
				<input required type="number" name="name" id="Alignment_SearchFieldX_value1"  min="1"  step="1"
					oninput="(!validity.rangeUnderflow||(value=1)) && (!validity.stepMismatch||(value=parseInt(this.value)));">Pixel
			</td>
			<td>$TOOLTIP_Alignment_SearchFieldX</td>
		</tr>

		<tr class="expert">
			<td class="indent1">
				<span id="Alignment_SearchFieldY_text" style="color:black;">Search Field Y</span>
			</td>
			<td>
				<input required type="number" name="name" id="Alignment_SearchFieldY_value1"  min="1"
					oninput="(!validity.rangeUnderflow||(value=1)) && (!validity.stepMismatch||(value=parseInt(this.value)));">Pixel
			</td>
			<td>$TOOLTIP_Alignment_SearchFieldY</td>
		</tr>

		<tr class="expert">
			<td class="indent1">
			    <span id="Alignment_FlipImageSize_text" style="color:black;">Flip Image Size</span>
			</td>
			<td>
				<select id="Alignment_FlipImageSize_value1">
					<option value="true">true</option>
					<option value="false" selected>false</option>
				</select>
			</td>
			<td>$TOOLTIP_Alignment_FlipImageSize</td>
		</tr>

		<tr>
			<td class="indent1">
			    <span id="Alignment_InitialRotate_text" style="color:black;">Image Rotation</span>
			</td>
			<td>
				<input required type="number" name="name" id="Alignment_InitialRotate_value1"  min="-360.0" max="360.0" step="0.1"
				oninput="(!validity.rangeUnderflow||(value=-360.0)) && (!validity.rangeOverflow||(value=360.0)) && 
				(!validity.stepMismatch||(value=parseInt(this.value)));">Degree
			</td>
			<td>$TOOLTIP_Alignment_InitialRotate</td>
		</tr>

		<tr>
			<td class="indent1">
			    <span id="Alignment_InitialMirror_text" style="color:black;">Mirror Image</span>
			</td>
			<td>
				<select id="Alignment_InitialMirror_value1">
					<option value="true">true</option>
					<option value="false" selected>false</option>
				</select>
			</td>
			<td>$TOOLTIP_Alignment_InitialMirror</td>
		</tr>

		<tr class="expert">
			<td class="indent1">
			    <span id="Alignment_SaveDebugInfo_text" style="color:black;">Save Debug Info</span>
			</td>
			<td>
				<select id="Alignment_SaveDebugInfo_value1">
					<option value="true">true</option>
					<option value="false" selected>false</option>
				</select>
			</td>
			<td>$TOOLTIP_Alignment_SaveDebugInfo</td>
		</tr>
	</table>


	<!-- Digit ROIs -->
	<table class="table">
		<colgroup>
			<col span="1" style="width:290px">
			<col span="1" style="width:300px;">
			<col span="1">
		</colgroup>

		<tr id="Category_Digits_ex4">
			<th colspan="3">
				<input type="checkbox" id="Category_Digits_enabled" value="1"  onclick ='UpdateAfterCategoryCheck()'  >
				<label for=Category_Digits_enabled>Digit ROI Processing</label>
			</th>
		</tr>

		<tr class="DigitItem">
			<td class="indent1" >
				<span id="Digits_Model_text" style="color:black;">Model</span>
			</td>
			<td>
				<select class="select_large" id="Digits_Model_value1">
				</select>
			</td>
			<td>$TOOLTIP_Digits_Model</td>
		</tr>
		
		<tr class="DigitItem expert">
			<td class="indent1">
				<span id="Digits_CNNGoodThreshold_text" style="color:black;">CNN Good Threshold</span>
			</td>
			<td>
				<input required type="number" id="Digits_CNNGoodThreshold_value1" min="0" max="1" step="0.01"
					oninput="(!validity.rangeUnderflow||(value=0)) && (!validity.rangeOverflow||(value=1)) && 
						(!validity.stepMismatch||(value=parseInt(this.value)));">
			</td>
			<td>$TOOLTIP_Digits_CNNGoodThreshold</td>
		</tr>

		<tr class="DigitItem expert">
			<td class="indent1">
				<input type="checkbox" id="Digits_ROIImagesLocation_enabled" value="1"  onclick = 'InvertEnableItem("Digits", "ROIImagesLocation")'  >
				<label for=Digits_ROIImagesLocation_enabled><span id="Digits_ROIImagesLocation_text" style="color:black;">ROI Images Location</span></label>
			</td>
			<td>
				<input required type="text" name="name" id="Digits_ROIImagesLocation_value1">
			</td>
			<td>$TOOLTIP_Digits_ROIImagesLocation</td>
		</tr>

		<tr class="DigitItem expert">
			<td class="indent1">
				<input type="checkbox" id="Digits_ROIImagesRetention_enabled" value="1"  onclick = 'InvertEnableItem("Digits", "ROIImagesRetention")'  >
				<label for=Digits_ROIImagesRetention_enabled><span id="Digits_ROIImagesRetention_text" style="color:black;">ROI Images Retention</span></label>
			</td>
			<td>
				<input required type="number" id="Digits_ROIImagesRetention_value1" min="0"  step="1"
					oninput="(!validity.rangeUnderflow||(value=0)) && (!validity.stepMismatch||(value=parseInt(this.value)));">Days
			</td>
			<td>$TOOLTIP_Digits_ROIImagesRetention</td>
		</tr>
	</table>


	<!-- Analog ROIs -->
	<table class="table">
		<colgroup>
			<col span="1" style="width:290px">
			<col span="1" style="width:300px;">
			<col span="1">
		</colgroup>

		<tr id="Category_Analog_ex4">
			<th colspan="3">
				<input type="checkbox" id="Category_Analog_enabled" value="1"  onclick = 'UpdateAfterCategoryCheck()'  >
				<label for=Category_Analog_enabled>Analog ROI Processing</label>
			</th>
		</tr>

		<tr class="AnalogItem">
			<td class="indent1">
			    <span id="Analog_Model_text" style="color:black;">Model</span>
			</td>
			<td> 
				<select class="select_large" id="Analog_Model_value1">
				</select>
			</td>
			<td>$TOOLTIP_Analog_Model</td>
		</tr>

		<tr class="AnalogItem expert">
			<td class="indent1">
				<input type="checkbox" id="Analog_ROIImagesLocation_enabled" value="1"  onclick = 'InvertEnableItem("Analog", "ROIImagesLocation")'  >
				<label for=Analog_ROIImagesLocation_enabled><span id="Analog_ROIImagesLocation_text" style="color:black;">ROI Images Location</span>
				</label>
			</td>
			<td> <input required type="text" name="name" id="Analog_ROIImagesLocation_value1"> </td>
			<td>$TOOLTIP_Analog_ROIImagesLocation</td>
		</tr>

		<tr class="AnalogItem expert">
			<td class="indent1">
				<input type="checkbox" id="Analog_ROIImagesRetention_enabled" value="1"  onclick = 'InvertEnableItem("Analog", "ROIImagesRetention")'  >
				<label for=Analog_ROIImagesRetention_enabled><span id="Analog_ROIImagesRetention_text" style="color:black;">ROI Images Retention</span></label></td>
			<td> 
				<input required type="number" id="Analog_ROIImagesRetention_value1" min="0" step="1"
					oninput="(!validity.rangeUnderflow||(value=0)) && (!validity.stepMismatch||(value=parseInt(this.value)));">Days
			</td>
			<td>$TOOLTIP_Analog_ROIImagesRetention</td>
		</tr>
	</table>


	<!-- Post-Processing -->
	<table class="table">
		<colgroup>
			<col span="1" style="width:290px">
			<col span="1" style="width:300px;">
			<col span="1">
		</colgroup>

		<tr>
			<th colspan="3">Post-Processing</th>
		</tr>

		<tr class="expert">
			<td class="indent1">
				<span id="PostProcessing_FallbackValueUse_text" style="color:black;">Use Fallback Value</span>
			</td>
			<td>
				<select id="PostProcessing_FallbackValueUse_value1">
					<option value="true" selected>true</option>
					<option value="false" >false</option>
				</select>
			</td>
			<td>$TOOLTIP_PostProcessing_FallbackValueUse</td>
		</tr>

		<tr class="expert">
			<td class="indent1">
				<span id="PostProcessing_FallbackValueAgeStartup_text" style="color:black;">Max. Age of Fallback Value</span>
			</td>
			<td>
				<input required type="number" id="PostProcessing_FallbackValueAgeStartup_value1"  min="0"
					oninput="(!validity.rangeUnderflow||(value=0)) && (!validity.stepMismatch||(value=parseInt(this.value)));">Minutes
			</td>
			<td>$TOOLTIP_PostProcessing_FallbackValueAgeStartup</td>
		</tr>

		<tr class="expert">
			<td class="indent1">
				<span id="PostProcessing_CheckDigitIncreaseConsistency_text" style="color:black;">Check Digit Increase Consistency</span>
			</td>
			<td>
				<select id="PostProcessing_CheckDigitIncreaseConsistency_value1">
					<option value="true" selected>true</option>
					<option value="false" >false</option>
				</select>
			</td>
			<td>$TOOLTIP_PostProcessing_CheckDigitIncreaseConsistency</td>
		</tr>

		<tr style="margin-top:12px">
			<td class="indent1" style="padding-top:25px" colspan="3">
				<b>Parameter per number sequence:</b>
                <select 
					style="font-weight: bold; margin-left:15px" id="Numbers_value1" onchange="numberChanged()">
				</select>
			</td>
		</tr>

		<tr class="expert">
			<td class="indent2">
				<span id="PostProcessing_AllowNegativeRates_text" style="color:black;">Allow Negative Rates</span>
			</td>
			<td>
				<select id="PostProcessing_AllowNegativeRates_value1">
					<option value="true" selected>true</option>
					<option value="false" >false</option>
				</select>
			</td>
			<td>$TOOLTIP_PostProcessing_NUMBER.AllowNegativeRates</td>
		</tr>

		<tr>
			<td class="indent2">
				<span id="PostProcessing_DecimalShift_text" style="color:black;">Decimal Shift</span>
			</td>
			<td>
				<input required type="number" id="PostProcessing_DecimalShift_value1" value="0" step="1" min="-9" max="9"
					oninput="(!validity.rangeUnderflow||(value=-9)) && (!validity.rangeOverflow||(value=9)) && 
						(!validity.stepMismatch||(value=parseInt(this.value)));">
			</td>
			<td>$TOOLTIP_PostProcessing_NUMBER.DecimalShift</td>
		</tr>

		<tr class="expert">
			<td class="indent2">
				<span id="PostProcessing_AnalogDigitalTransitionStart_text" style="color:black;">Analog/Digital Transition Start</span>
			</td>
			<td>
				<input required type="number" id="PostProcessing_AnalogDigitalTransitionStart_value1" step="0.1" min="6.0" max="9.9" value="9.2"
					oninput="(!validity.rangeUnderflow||(value=6.0)) && (!validity.rangeOverflow||(value=9.9)) && 
						(!validity.stepMismatch||(value=parseInt(this.value)));">
			</td>
			<td>$TOOLTIP_PostProcessing_NUMBER.AnalogDigitalTransitionStart</td>
		</tr>

		<tr>
			<td class="indent2">
				<span id="PostProcessing_MaxRateType_text" style="color:black;">Maximum Rate Check Type</span>
			</td>
			<td>
				<select id="PostProcessing_MaxRateType_value1">
					<option value="RatePerMin" selected>Rate Per Minute</option>
					<option value="RatePerProcessing">Rate Per Processing</option>
					<option value="RateOff" >No Rate Check</option>
				</select>
			</td>
			<td>$TOOLTIP_PostProcessing_NUMBER.MaxRateType</td>
		</tr>

		<tr>
			<td class="indent2">
				<span id="PostProcessing_MaxRateValue_text" style="color:black;">Maximum Rate Value</span>
			</td>
			<td>
				<input required type="number" id="PostProcessing_MaxRateValue_value1" step="any"
					oninput="(!validity.rangeUnderflow||(value=0)) && (!validity.stepMismatch||(value=parseInt(this.value)));">
			</td>
			<td>$TOOLTIP_PostProcessing_NUMBER.MaxRateValue</td>
		</tr>

		<tr class="expert">
			<td class="indent2">
				<span id="PostProcessing_ExtendedResolution_text" style="color:black;">Extended Resolution</span>
			</td>
			<td>
				<select id="PostProcessing_ExtendedResolution_value1">
					<option value="true" >true</option>
					<option value="false" selected>false</option>
				</select>
			</td>
			<td>$TOOLTIP_PostProcessing_NUMBER.ExtendedResolution</td>
		</tr>

		<tr class="expert">
			<td class="indent2">
				<span id="PostProcessing_IgnoreLeadingNaN_text" style="color:black;">Ignore Leading NaNs</span>
			</td>
			<td>
				<select id="PostProcessing_IgnoreLeadingNaN_value1">
					<option value="true" >true</option>
					<option value="false" selected>false</option>
				</select>
			</td>
			<td>$TOOLTIP_PostProcessing_NUMBER.IgnoreLeadingNaN</td>
		</tr>

		<tr class="expert"  id="ex13">
			<td class="indent1">
			    <span id="PostProcessing_SaveDebugInfo_text" style="color:black;">Save Debug Info</span>
			</td>
			<td>
				<select id="PostProcessing_SaveDebugInfo_value1">
					<option value="true">true</option>
					<option value="false" selected>false</option>
				</select>
			</td>
			<td>$TOOLTIP_PostProcessing_SaveDebugInfo</td>
		</tr>
	</table>

	
	<!-- MQTT -->
	<table class="table">
		<colgroup>
			<col span="1" style="width:290px">
			<col span="1" style="width:300px;">
			<col span="1">
		</colgroup>

		<tr>
			<th colspan="3">
				<input type="checkbox" id="Category_MQTT_enabled" value="1"  onclick = 'UpdateAfterCategoryCheck()'  >
				<label for=Category_MQTT_enabled>MQTT</label>
			</th>
		</tr>

		<tr class="MQTTItem">
			<td class="indent1">
				<span id="MQTT_Uri_text" style="color:black;">URI</span>
			</td>
			<td>
				<input required type="text" id="MQTT_Uri_value1">
			</td>
			<td>$TOOLTIP_MQTT_Uri</td>
		</tr>

		<tr class="MQTTItem">
			<td class="indent1">
				<span id="MQTT_MainTopic_text" style="color:black;">Main Topic</span>
			</td>
			<td>
				<input required type="text" id="MQTT_MainTopic_value1">
			</td>
			<td>$TOOLTIP_MQTT_MainTopic</td>
		</tr>

		<tr class="MQTTItem">
			<td class="indent1">
				<span id="MQTT_ClientID_text" style="color:black;">Client ID</span>
			</td>
			<td>
				<input required type="text" id="MQTT_ClientID_value1">
			</td>
			<td>$TOOLTIP_MQTT_ClientID</td>
		</tr>

		<tr class="MQTTItem">
			<td class="indent1">
				<input type="checkbox" id="MQTT_user_enabled" value="1"  onclick = 'InvertEnableItem("MQTT", "user")'  >
				<label for=MQTT_user_enabled><span id="MQTT_user_text" style="color:black;">Username</span></label>
			</td>
			<td>
				<input type="text" id="MQTT_user_value1">
			</td>
			<td>$TOOLTIP_MQTT_user</td>
		</tr>

		<tr class="MQTTItem">
			<td class="indent1">
				<input type="checkbox" id="MQTT_password_enabled" value="1"  onclick = 'InvertEnableItem("MQTT", "password")'  >
				<label for=MQTT_password_enabled><span id="MQTT_password_text" style="color:black;">Password</span></label>
			</td>
			<td>
				<input type="text" id="MQTT_password_value1">
			</td>
			<td>$TOOLTIP_MQTT_password</td>
		</tr>

		<tr class="MQTTItem expert">
			<td class="indent1">
				<span id="MQTT_TLSEncryption_text" style="color:black;">TLS Encryption</span>
			</td>
			<td>
				<select id="MQTT_TLSEncryption_value1" onchange='setEnabled("MQTT_TLSEncryption_parameter", this.value == "true" ? true : false);'>
					<option value="true">true</option>
					<option value="false" selected>false</option>
				</select>
			</td>
			<td>$TOOLTIP_MQTT_TLSEncryption</td>
		</tr>

		<tr class="MQTTItem MQTT_TLSEncryption_parameter expert">
			<td class="indent2">
				<span id="MQTT_TLSCACert_text">CA Certificate</span>
			</td>
			<td>
				<input type="text" id="MQTT_TLSCACert_value1">
			</td>
			<td>$TOOLTIP_MQTT_TLSCACert</td>
		</tr>

		<tr class="MQTTItem MQTT_TLSEncryption_parameter expert">
			<td class="indent2">
				<span id="MQTT_TLSClientCert_text">Client Certificate</span>
			</td>
			<td>
				<input type="text" id="MQTT_TLSClientCert_value1">
			</td>
			<td>$TOOLTIP_MQTT_TLSClientCert</td>
		</tr>

		<tr class="MQTTItem MQTT_TLSEncryption_parameter expert">
			<td class="indent2">
				<span id="MQTT_TLSClientKey_text">Client Key</span>
			</td>
			<td>
				<input type="text" id="MQTT_TLSClientKey_value1">
			</td>
			<td>$TOOLTIP_MQTT_TLSClientKey</td>
		</tr>

		<tr class="MQTTItem">
			<td class="indent1">
				<span id="MQTT_RetainMessages_text" style="color:black;">Retain Messages</span>
			</td>
			<td>
				<select id="MQTT_RetainMessages_value1">
					<option value="true" selected>true</option>
					<option value="false" >false</option>
				</select>
			</td>
			<td>$TOOLTIP_MQTT_RetainMessages</td>
		</tr>

		<tr class="MQTTItem">
			<td class="indent1" style="padding-top:25px" colspan="3">
				<b>Homeassistant Discovery (using MQTT)</b>
			</td>
		</tr>

		<tr class="MQTTItem">
			<td class="indent2">
				<span id="MQTT_HomeassistantDiscovery_text" style="color:black;">Homeassistant Discovery</span>
			</td>
			<td>
				<select id="MQTT_HomeassistantDiscovery_value1">
					<option value="true" selected>true</option>
					<option value="false" >false</option>
				</select>
			</td>
			<td>$TOOLTIP_MQTT_HomeassistantDiscovery</td>
		</tr>

		<tr class="MQTTItem">
			<td class="indent2">
				<span id="MQTT_MeterType_text" style="color:black;">Meter Type</span>
			</td>
			<td>
				<select class="select_large" id="MQTT_MeterType_value1"> <!--  See https://developers.home-assistant.io/docs/core/entity/sensor/#available-device-classes -->
					<option value="other" selected>Other (no Units)</option>
					<option value="water_m3">Watermeter (Value: m³, Rate: m³/h)</option>
					<option value="water_l">Watermeter (Value: l, Rate: l/h)</option>
					<option value="water_gal">Watermeter (Value: gal, Rate: gal/h)</option>
					<option value="water_ft3">Watermeter (Value: ft³, Rate: ft³/m)</option>
					<option value="gas_m3">Gasmeter (Value: m³, Rate: m³/h)</option>
					<option value="gas_ft3">Gasmeter (Value: ft³, Rate: ft³/m)</option>
					<option value="energy_wh">Energymeter (Value: Wh, Rate: W)</option>
					<option value="energy_kwh">Energymeter (Value: kWh, Rate: kW)</option>
					<option value="energy_mwh">Energymeter (Value: MWh, Rate: MW)</option>
					<option value="energy_gj">Energymeter (Value: GJ, Rate: GJ/h)</option>
				</select>
			</td>
			<td>$TOOLTIP_MQTT_MeterType</td>
		</tr>
	</table>


	<!-- INFLUXDB v1 -->
	<table class="table">
		<colgroup>
			<col span="1" style="width:290px">
			<col span="1" style="width:300px;">
			<col span="1">
		</colgroup>

		<tr>
			<th colspan="3">
				<input type="checkbox" id="Category_InfluxDB_enabled" value="1"  onclick = 'UpdateAfterCategoryCheck()'  >
				<label for=Category_InfluxDB_enabled>InfluxDB v1.x</label>
			</th>
		</tr>
		
		<tr class="InfluxDBv1Item">
			<td class="indent1">
				<span id="InfluxDB_Uri_text" style="color:black;">URI</span>
			</td>
			<td>
				<input required type="text" id="InfluxDB_Uri_value1">
			</td>
			<td>$TOOLTIP_InfluxDB_Uri</td>
		</tr>

        <tr class="InfluxDBv1Item">
			<td class="indent1">
				<span id="InfluxDB_Database_text" style="color:black;">Database</span>
			</td>
			<td>
				<input required type="text" id="InfluxDB_Database_value1">
			</td>
			<td>$TOOLTIP_InfluxDB_Database</td>
		</tr>

		<tr class="InfluxDBv1Item">
			<td class="indent1">
				<input type="checkbox" id="InfluxDB_user_enabled" value="1"  onclick = 'InvertEnableItem("InfluxDB", "user")'  >
				<label for=InfluxDB_user_enabled><span id="InfluxDB_user_text" style="color:black;">Username</span></label>
			</td>
			<td>
				<input type="text" id="InfluxDB_user_value1">
			</td>
			<td>$TOOLTIP_InfluxDB_user</td>
		</tr>

		<tr class="InfluxDBv1Item">
			<td class="indent1">
				<input type="checkbox" id="InfluxDB_password_enabled" value="1"  onclick = 'InvertEnableItem("InfluxDB", "password")'  >
				<label for=InfluxDB_password_enabled><span id="InfluxDB_password_text" style="color:black;">Password</span></label>
			</td>
			<td>
				<input type="text" id="InfluxDB_password_value1">
			</td>
			<td>$TOOLTIP_InfluxDB_password</td>
		</tr>

		<tr class="InfluxDBv1Item expert">
			<td class="indent1">
				<span id="InfluxDB_TLSEncryption_text" style="color:black;">TLS Encryption</span>
			</td>
			<td>
				<select id="InfluxDB_TLSEncryption_value1" onchange='setEnabled("InfluxDB_TLSEncryption_parameter", this.value == "true" ? true : false);'>
					<option value="true">true</option>
					<option value="false" selected>false</option>
				</select>
			</td>
			<td>$TOOLTIP_InfluxDB_TLSEncryption</td>
		</tr>

		<tr class="InfluxDBv1Item InfluxDB_TLSEncryption_parameter expert">
			<td class="indent2">
				<span id="InfluxDB_TLSCACert_text">CA Certificate</span>
			</td>
			<td>
				<input type="text" id="InfluxDB_TLSCACert_value1">
			</td>
			<td>$TOOLTIP_InfluxDB_TLSCACert</td>
		</tr>

		<tr class="InfluxDBv1Item InfluxDB_TLSEncryption_parameter expert">
			<td class="indent2">
				<span id="InfluxDB_TLSClientCert_text">Client Certificate</span>
			</td>
			<td>
				<input type="text" id="InfluxDB_TLSClientCert_value1">
			</td>
			<td>$TOOLTIP_InfluxDB_TLSClientCert</td>
		</tr>

		<tr class="InfluxDBv1Item InfluxDB_TLSEncryption_parameter expert">
			<td class="indent2">
				<span id="InfluxDB_TLSClientKey_text">Client Key</span>
			</td>
			<td>
				<input type="text" id="InfluxDB_TLSClientKey_value1">
			</td>
			<td>$TOOLTIP_InfluxDB_TLSClientKey</td>
		</tr>

		<tr class="InfluxDBv1Item" style="margin-top:12px">
			<td class="indent1" style="padding-top:25px" colspan="3">
				<b>Parameter per number sequence:</b>
                <select
					style="font-weight: bold; margin-left:15px" id="NumbersInfluxDB_value1" onchange="numberInfluxDBChanged()">
                </select>
			</td>
		</tr>
		
		<tr class="InfluxDBv1Item">
			<td class="indent2">
				<span id="InfluxDB_Measurement_text" style="color:black;">Measurement</span>
			</td>
			<td>
				<input required type="text" id="InfluxDB_Measurement_value1">
			</td>
			<td>$TOOLTIP_InfluxDB_NUMBER.Measurement</td>
		</tr>

		<tr class="InfluxDBv1Item">
			<td class="indent2">
				<span id="InfluxDB_Field_text" style="color:black;">Field</span>
			</td>
			<td>
				<input required type="text" id="InfluxDB_Field_value1">
			</td>
			<td>$TOOLTIP_InfluxDB_NUMBER.Field</td>
		</tr>
	</table>


	<!-- INFLUXDB v2 -->
	<table class="table">
		<colgroup>
			<col span="1" style="width:290px">
			<col span="1" style="width:300px;">
			<col span="1">
		</colgroup>

		<tr>
			<th colspan="3">
				<input type="checkbox" id="Category_InfluxDBv2_enabled" value="1"  onclick = 'UpdateAfterCategoryCheck()'  >
				<label for=Category_InfluxDBv2_enabled>InfluxDB v2.x</label>
			</th>
		</tr>

		<tr class="InfluxDBv2Item">
			<td class="indent1">
				<span id="InfluxDBv2_Uri_text" style="color:black;">URI</span>
			</td>
			<td>
				<input required type="text" id="InfluxDBv2_Uri_value1">
			</td>
			<td>$TOOLTIP_InfluxDBv2_Uri</td>
		</tr>

        <tr class="InfluxDBv2Item">
			<td class="indent1">
				<span id="InfluxDBv2_Bucket_text" style="color:black;">Bucket</span>
			</td>
			<td>
				<input required type="text" id="InfluxDBv2_Bucket_value1">
			</td>
			<td>$TOOLTIP_InfluxDBv2_Bucket</td>
		</tr>

		<tr class="InfluxDBv2Item">
			<td class="indent1">
				<input type="checkbox" id="InfluxDBv2_Org_enabled" value="1"  onclick = 'InvertEnableItem("InfluxDBv2", "Org")'  >
				<label for=InfluxDBv2_Org_enabled><span id="InfluxDBv2_Org_text" style="color:black;">Organization (Org)</span></label>
			</td>
			<td>
				<input type="text" id="InfluxDBv2_Org_value1">
			</td>
			<td>$TOOLTIP_InfluxDBv2_Org</td>
		</tr>

		<tr class="InfluxDBv2Item">
			<td class="indent1">
				<input type="checkbox" id="InfluxDBv2_Token_enabled" value="1"  onclick = 'InvertEnableItem("InfluxDBv2", "Token")'  >
				<label for=InfluxDBv2_Token_enabled><span id="InfluxDBv2_Token_text" style="color:black;">Token</span></label>
			</td>
			<td>
				<input type="text" id="InfluxDBv2_Token_value1">
			</td>
			<td>$TOOLTIP_InfluxDBv2_Token</td>
		</tr>

		<tr class="InfluxDBv2Item expert">
			<td class="indent1">
				<span id="InfluxDBv2_TLSEncryption_text" style="color:black;">TLS Encryption</span>
			</td>
			<td>
				<select id="InfluxDBv2_TLSEncryption_value1" onchange='setEnabled("InfluxDBv2_TLSEncryption_parameter", this.value == "true" ? true : false);'>
					<option value="true">true</option>
					<option value="false" selected>false</option>
				</select>
			</td>
			<td>$TOOLTIP_InfluxDBv2_TLSEncryption</td>
		</tr>

		<tr class="InfluxDBv2Item InfluxDBv2_TLSEncryption_parameter expert">
			<td class="indent2">
				<span id="InfluxDBv2_TLSCACert_text">CA Certificate</span>
			</td>
			<td>
				<input type="text" id="InfluxDBv2_TLSCACert_value1">
			</td>
			<td>$TOOLTIP_InfluxDBv2_TLSCACert</td>
		</tr>

		<tr class="InfluxDBv2Item InfluxDBv2_TLSEncryption_parameter expert">
			<td class="indent2">
				<span id="InfluxDBv2_TLSClientCert_text">Client Certificate</span>
			</td>
			<td>
				<input type="text" id="InfluxDBv2_TLSClientCert_value1">
			</td>
			<td>$TOOLTIP_InfluxDBv2_TLSClientCert</td>
		</tr>

		<tr class="InfluxDBv2Item InfluxDBv2_TLSEncryption_parameter expert">
			<td class="indent2">
				<span id="InfluxDBv2_TLSClientKey_text">Client Key</span>
			</td>
			<td>
				<input type="text" id="InfluxDBv2_TLSClientKey_value1">
			</td>
			<td>$TOOLTIP_InfluxDBv2_TLSClientKey</td>
		</tr>

		<tr class="InfluxDBv2Item" style="margin-top:12px">
			<td class="indent1" style="padding-top:25px" colspan="3">
				<b>Parameter per number sequence:</b>
                <select
					style="font-weight: bold; margin-left:15px" id="NumbersInfluxDBv2_value1" onchange="numberInfluxDBv2Changed()">
                </select>
			</td>
		</tr>

		<tr class="InfluxDBv2Item">
			<td class="indent2">
				<span id="InfluxDBv2_Measurement_text" style="color:black;">Measurement</span>
			</td>
			<td>
				<input required type="text" id="InfluxDBv2_Measurement_value1">
			</td>
			<td>$TOOLTIP_InfluxDBv2_NUMBER.Measurement</td>
		</tr>
		
		<tr class="InfluxDBv2Item">
			<td class="indent2">
				<span id="InfluxDBv2_Field_text" style="color:black;">Field</span>
			</td>
			<td>
				<input required type="text" id="InfluxDBv2_Field_value1">
			</td>
			<td>$TOOLTIP_InfluxDBv2_NUMBER.Field</td>
		</tr>
	</table>


	<!-- GPIO -->
	<table class="table">
		<colgroup>
			<col span="1" style="width:290px">
			<col span="1" style="width:300px;">
			<col span="1">
		</colgroup>

		<tr>
			<th colspan="3">
				<input type="checkbox" id="Category_GPIO_enabled" value="1"  onclick='UpdateAfterCategoryCheck()'  > 
				    <label for=Category_GPIO_enabled>GPIO (General Purpose Input / Output)</label>
			</th>
		</tr>

		<!-- GPIO0 begin -->
		<tr class="GPIO_IO0 GPIO_item expert">
			<td class="indent1">
				<input type="checkbox" id="GPIO_IO0_enabled" value="1"  onclick = 'InvertEnableItem("GPIO", "IO0")' >
				<label for=GPIO_IO0_enabled><span id="GPIO_IO0_text">GPIO0 Configuration</span></label>
			</td>
			<td>
					<select id="GPIO_IO0_value1">
						<option value="input">input</option>
						<option value="input-pullup">input pullup</option>
						<option value="input-pulldown">input pulldown</option>
						<option value="output">output</option>
					</select>
			</td>
			<td>$TOOLTIP_GPIO_IO0</td>
		</tr>

		<tr class="GPIO_IO0 GPIO_item expert">
			<td class="indent2">
				<span class="GPIO_IO0 GPIO_item">GPIO0 Use Interrupt</span>
			</td>
			<td>
					<select id="GPIO_IO0_value2">
						<option value="disabled">disabled</option>
						<option value="rising-edge">rising edge</option>
						<option value="falling-edge">falling edge</option>
						<option value="rising-and-falling">rising and falling</option>
						<option value="low-level-trigger">low level trigger</option>
						<option value="high-level-trigger">high level trigger</option>
					</select>	
				</td>
			<td></td>
		</tr>

		<tr class="GPIO_IO0 GPIO_item expert">
			<td class="indent2">
				<span class="GPIO_IO0 GPIO_item">GPIO0 PWM Duty Cycle Resolution</span>
			</td>
			<td>
				<input required type="number" id="GPIO_IO0_value3" min="1" max="20"
					oninput="(!validity.rangeUnderflow||(value=1)) && (!validity.rangeOverflow||(value=20)) && 
						(!validity.stepMismatch||(value=parseInt(this.value)));"><span class="GPIO_IO0 GPIO_item">Bits</span>
			</td>
			<td></td>
		</tr>

		<tr class="GPIO_IO0 GPIO_item expert">
			<td class="indent2">
				<span class="GPIO_IO0 GPIO_item">GPIO0 Enable MQTT</span>
			</td>
			<td><input type="checkbox" id="GPIO_IO0_value4" ></td>
			<td></td>
		</tr>

		<tr class="GPIO_IO0 GPIO_item expert">
			<td class="indent2">
				<span class="GPIO_IO0 GPIO_item">GPIO0 Enable REST API</span>
			</td>
			<td><input type="checkbox" id="GPIO_IO0_value5" ></td>
			<td></td>
		</tr>

		<tr class="GPIO_IO0 GPIO_item expert">
			<td class="indent2">
				<span class="GPIO_IO0 GPIO_item">GPIO0 Name</span>
			</td>
			<td><input type="text" id="GPIO_IO0_value6" ></td>
			<td></td>
		</tr>
		<!-- GPIO0 end -->

		<!-- GPIO1 begin -->
		<tr class="GPIO_IO1 GPIO_item expert">
			<td class="indent1">
				<input type="checkbox" id="GPIO_IO1_enabled" value="1"  onclick = 'InvertEnableItem("GPIO", "IO1")' >
				<label for=GPIO_IO1_enabled><span id="GPIO_IO1_text">GPIO1 Configuration</span></label>
			</td>
			<td>
					<select id="GPIO_IO1_value1">
						<option value="input">input</option>
						<option value="input-pullup">input pullup</option>
						<option value="input-pulldown">input pulldown</option>
						<option value="output">output</option>
					</select>
			</td>
			<td>$TOOLTIP_GPIO_IO1</td>
		</tr>

		<tr class="GPIO_IO1 GPIO_item expert">
			<td class="indent2">
				<span class="GPIO_IO1 GPIO_item expert">GPIO1 Use Interrupt</span>
			</td>
			<td>
				<select id="GPIO_IO1_value2">
					<option value="disabled">disabled</option>
					<option value="rising-edge" disabled>rising edge</option>
					<option value="falling-edge" disabled>falling edge</option>
					<option value="rising-and-falling">rising and falling</option>
					<option value="low-level-trigger">low level trigger</option>
					<option value="high-level-trigger">high level trigger</option>
				</select>
			</td>
			<td></td>
		</tr>

		<tr class="GPIO_IO1 GPIO_item expert">
			<td class="indent2">
				<span class="GPIO_IO1 GPIO_item">GPIO1 PWM Duty Cycle Resolution</span>
			</td>
			<td><input required type="number" id="GPIO_IO1_value3" min="1" max="20"
					oninput="(!validity.rangeUnderflow||(value=1)) && (!validity.rangeOverflow||(value=20)) && 
						(!validity.stepMismatch||(value=parseInt(this.value)));"><span class="GPIO_IO1 GPIO_item">Bits</span>
			</td>
			<td></td>
		</tr>

		<tr class="GPIO_IO1 GPIO_item expert">
			<td class="indent2">
				<span class="GPIO_IO1 GPIO_item">GPIO1 Enable MQTT</span>
			</td>
			<td><input type="checkbox" id="GPIO_IO1_value4" ></td>
			<td></td>
		</tr>

		<tr class="GPIO_IO1 GPIO_item expert">
			<td class="indent2">
				<span class="GPIO_IO1 GPIO_item">GPIO1 Enable REST API</span>
			</td>
			<td><input type="checkbox" id="GPIO_IO1_value5" ></td>
			<td></td>
		</tr>

		<tr class="GPIO_IO1 GPIO_item expert">
			<td class="indent2">
				<span class="GPIO_IO1 GPIO_item expert">GPIO1 Name</span>
			</td>
			<td><input type="text" id="GPIO_IO1_value6" ></td>
			<td></td>
		</tr>
		<!-- GPIO1 end -->

		<!-- GPIO3 begin -->
		<tr class="GPIO_IO3 GPIO_item expert">
			<td class="indent1">
				<input type="checkbox" id="GPIO_IO3_enabled" value="1"  onclick = 'InvertEnableItem("GPIO", "IO3")' >
				<label for=GPIO_IO3_enabled><span id="GPIO_IO3_text">GPIO3 Configuration</span></label>
			</td>
			<td>
				<select id="GPIO_IO3_value1">
					<option value="input">input</option>
					<option value="input-pullup">input pullup</option>
					<option value="input-pulldown">input pulldown</option>
					<option value="output">output</option>
				</select>
			</td>
			<td>$TOOLTIP_GPIO_IO3</td>
		</tr>

		<tr class="GPIO_IO3 GPIO_item expert">
			<td class="indent2">
				<span class="GPIO_IO3 GPIO_item">GPIO3 Use Interrupt</span>
			</td>
			<td>
				<select id="GPIO_IO3_value2">
					<option value="disabled">disabled</option>
					<option value="rising-edge" disabled>rising edge</option>
					<option value="falling-edge" disabled>falling edge</option>
					<option value="rising-and-falling">rising and falling</option>
					<option value="low-level-trigger">low level trigger</option>
					<option value="high-level-trigger">high level trigger</option>
				</select>
			</td>
			<td></td>
		</tr>

		<tr class="GPIO_IO3 GPIO_item expert">
			<td class="indent2">
				<span class="GPIO_IO3 GPIO_item">GPIO3 PWM Duty Cycle Resolution</span>
			</td>
			<td><input required type="number" id="GPIO_IO3_value3" min="1" max="20"
					oninput="(!validity.rangeUnderflow||(value=1)) && (!validity.rangeOverflow||(value=20)) && 
						(!validity.stepMismatch||(value=parseInt(this.value)));"><span class="GPIO_IO3 GPIO_item">Bits</span>
			</td>
			<td></td>
		</tr>

		<tr class="GPIO_IO3 GPIO_item expert">
			<td class="indent2">
				<span class="GPIO_IO3 GPIO_item">GPIO3 Enable MQTT</span>
			</td>
			<td><input type="checkbox" id="GPIO_IO3_value4" ></td>
			<td></td>
		</tr>

		<tr class="GPIO_IO3 GPIO_item expert">
			<td class="indent2">
				<span class="GPIO_IO3 GPIO_item">GPIO3 Enable REST API</span>
			</td>
			<td><input type="checkbox" id="GPIO_IO3_value5" ></td>
			<td></td>
		</tr>

		<tr class="GPIO_IO3 GPIO_item expert">
			<td class="indent2">
				<span class="GPIO_IO3 GPIO_item">GPIO3 Name</span>
			</td>
			<td><input type="text" id="GPIO_IO3_value6" ></td>
			<td></td>
		</tr>
		<!-- GPIO3 end -->

		<!-- GPIO4 begin -->
		<tr class="GPIO_item" style="border-bottom: 0px;">
			<td class="indent1">
				<input type="checkbox" id="GPIO_IO4_enabled" value="1"  onclick = 'InvertEnableItem("GPIO", "IO4")' checked>
				<label for=GPIO_IO4_enabled><span id="GPIO_IO4_text">GPIO4 Configuration</span></label>
			</td>
			<td>
				<select id="GPIO_IO4_value1">
					<option value="input">input</option>
					<option value="input-pullup">input pullup</option>
					<option value="input-pulldown">input pulldown</option>
					<option value="output">output</option>
					<option value="built-in-led" selected>built-in led flash light</option>
				</select>
			</td>
			<td>$TOOLTIP_GPIO_IO4</td>
		</tr>

		<tr class="GPIO_item" style="border-top: 0px;">
			<td colspan="3" style="padding-left:28px">
				<b>IMPORTANT NOTE:</b><br>
				If you'd like to use the built-in flash LED in parallel with other GPIO functionality,
				you have to explicitely activate the "built-in LED flash light" option on GPIO4. The light 
				intensity control (PWM) of the LED flash light is not functional anymore (only 100%).
			</td>
		</tr>

		<tr class="GPIO_IO4 GPIO_item expert">
			<td class="indent2">
				<span class="GPIO_IO4 GPIO_item">GPIO4 Use Interrupt</span>
			</td>
			<td>
				<select id="GPIO_IO4_value2">
					<option value="disabled">disabled</option>
					<option value="rising-edge">rising edge</option>
					<option value="falling-edge">falling edge</option>
					<option value="rising-and-falling">rising and falling</option>
					<option value="low-level-trigger">low level trigger</option>
					<option value="high-level-trigger">high level trigger</option>
				</select>	
			</td>
			<td></td>
		</tr>

		<tr class="GPIO_IO4 GPIO_item expert">
			<td class="indent2">
				<span class="GPIO_IO4 GPIO_item">GPIO4 PWM Duty Cycle Resolution</span>
			</td>
			<td><input required type="number" id="GPIO_IO4_value3" min="1" max="20"
					oninput="(!validity.rangeUnderflow||(value=1)) && (!validity.rangeOverflow||(value=20)) && 
						(!validity.stepMismatch||(value=parseInt(this.value)));"><span class="GPIO_IO4 GPIO_item">Bits</span>
			</td>
			<td></td>
		</tr>

		<tr class="GPIO_IO4 GPIO_item expert">
			<td class="indent2">
				<span class="GPIO_IO4 GPIO_item">GPIO4 Enable MQTT</span>
			</td>
			<td><input type="checkbox" id="GPIO_IO4_value4" ></td>
			<td></td>
		</tr>

		<tr class="GPIO_IO4 GPIO_item expert">
			<td class="indent2">
				<span class="GPIO_IO4 GPIO_item">GPIO4 Enable REST API</span>
			</td>
			<td><input type="checkbox" id="GPIO_IO4_value5" ></td>
			<td></td>
		</tr>

		<tr class="GPIO_IO4 GPIO_item expert">
			<td class="indent2">
				<span class="GPIO_IO4 GPIO_item">GPIO4 Name</span>
			</td>
			<td><input type="text" id="GPIO_IO4_value6" ></td>
			<td></td>
		</tr>
		<!-- GPIO4 end -->

		<!-- GPIO12 begin -->
		<tr class="GPIO_item">
			<td class="indent1">
				<input type="checkbox" id="GPIO_IO12_enabled" value="1"  onclick = 'InvertEnableItem("GPIO", "IO12")' >
				<label for=GPIO_IO12_enabled><span id="GPIO_IO12_text">GPIO12 Configuration</span></label>
			</td>
			<td>
				<select id="GPIO_IO12_value1">
					<option value="input">input</option>
					<option value="input-pullup">input pullup</option>
					<option value="input-pulldown">input pulldown</option>
					<option value="output">output</option>
					<option value="external-flash-ws281x" selected>external flash light ws281x controlled</option>
				</select>
			</td>
			<td>$TOOLTIP_GPIO_IO12</td>
		</tr>

		<tr class="GPIO_IO12 GPIO_item expert">
			<td class="indent2">
				<span class="GPIO_IO12 GPIO_item">GPIO12 Use Interrupt</span>
			</td>
			<td>
				<select class="GPIO_IO12 GPIO_item" id="GPIO_IO12_value2">
					<option value="disabled">disabled</option>
					<option value="rising-edge">rising edge</option>
					<option value="falling-edge">falling edge</option>
					<option value="rising-and-falling">rising and falling</option>
					<option value="low-level-trigger">low level trigger</option>
					<option value="high-level-trigger">high level trigger</option>
				</select>	
			</td>
			<td></td>
		</tr>

		<tr class="GPIO_IO12 GPIO_item expert">
			<td class="indent2">
				<span class="GPIO_IO12 GPIO_item">GPIO12 PWM Duty Cycle Resolution</span>
			</td>
			<td><input required type="number" id="GPIO_IO12_value3" min="1" max="20"
					oninput="(!validity.rangeUnderflow||(value=1)) && (!validity.rangeOverflow||(value=20)) && 
						(!validity.stepMismatch||(value=parseInt(this.value)));"><span class="GPIO_IO12 GPIO_item">Bits</span>
			</td>
			<td></td>
		</tr>

		<tr class="GPIO_IO12 GPIO_item expert">
			<td class="indent2">
				<span class="GPIO_IO12 GPIO_item">GPIO12 Enable MQTT</span>
			</td>
			<td><input type="checkbox" id="GPIO_IO12_value4" ></td>
			<td></td>
		</tr>

		<tr class="GPIO_IO12 GPIO_item expert">
			<td class="indent2">
				<span class="GPIO_IO12 GPIO_item">GPIO12 Enable REST API</span>
			</td>
			<td><input type="checkbox" id="GPIO_IO12_value5" ></td>
			<td></td>
		</tr>

		<tr class="GPIO_item expert">
			<td class="indent2">
				<span class="GPIO_IO12 GPIO_item">GPIO12 Name</span>
			</td>
			<td><input type="text" id="GPIO_IO12_value6" ></td>
			<td></td>
		</tr>

		<tr class="GPIO_item">
			<td class="indent1">
				<span class="GPIO_IO12 GPIO_item" id="GPIO_LEDType_text">LED Type (NeoPixel)</span>
			</td>
			<td class="GPIO_IO12 GPIO_item">
				<select class="GPIO_IO12 GPIO_item" id="GPIO_LEDType_value1">
					<option value="WS2812" selected>WS2812</option>
					<option value="WS2812B">WS2812B</option>
					<option value="SK6812">SK6812</option>
					<option value="WS2813">WS2813</option>
				</select>
			</td>
			<td>$TOOLTIP_GPIO_LEDType</td>
		</tr>

		<tr class="GPIO_item">
			<td class="indent1">
				<span class="GPIO_item" id="GPIO_LEDNumbers_text">Numbers of LEDs</span>
			</td>
			<td>
				<input required type="number" name="name" id="GPIO_LEDNumbers_value1"  min="1"
					oninput="(!validity.rangeUnderflow||(value=1)) && (!validity.stepMismatch||(value=parseInt(this.value)));">
			</td>
			<td>$TOOLTIP_GPIO_LEDNumbers</td>
		</tr>

		<tr class="GPIO_item">
			<td class="indent1">
				<span class="GPIO_item" id="GPIO_LEDColor_text">LED Color</span>
			</td>
			<td class="GPIO_item">
				R <input required style="min-width:45px;width:45px;" type="number" class="GPIO_item" id="GPIO_LEDColor_value1"
						 min="0" max="255" step="1" oninput="(!validity.rangeUnderflow||(value=0)) && (!validity.rangeOverflow||(value=255)) && 
							(!validity.stepMismatch||(value=parseInt(this.value)));">
				G <input required style="min-width:45px;width:45px" type="number" class="GPIO_item" id="GPIO_LEDColor_value2"
						 min="0" max="255" step="1" oninput="(!validity.rangeUnderflow||(value=0)) && (!validity.rangeOverflow||(value=255)) && 
							(!validity.stepMismatch||(value=parseInt(this.value)));">
				B <input required style="min-width:45px;width:45px" type="number" class="GPIO_item" id="GPIO_LEDColor_value3"
						 min="0" max="255" step="1" oninput="(!validity.rangeUnderflow||(value=0)) && (!validity.rangeOverflow||(value=255)) && 
							(!validity.stepMismatch||(value=parseInt(this.value)));">
			</td>
			<td>$TOOLTIP_GPIO_LEDColor</td>
		</tr>
		<!-- GPIO12 end -->

		<!-- GPIO13 begin -->
		<tr class="GPIO_IO13 GPIO_item expert">
			<td class="indent1">
				<input type="checkbox" id="GPIO_IO13_enabled" value="1"  onclick = 'InvertEnableItem("GPIO", "IO13")' >
				<label for=GPIO_IO13_enabled><span id="GPIO_IO13_text">GPIO13 Configuration</span></label>
			</td>
			<td>
					<select id="GPIO_IO13_value1">
						<option value="input">input</option>
						<option value="input-pullup">input pullup</option>
						<option value="input-pulldown">input pulldown</option>
						<option value="output">output</option>
					</select>
			</td>
			<td>$TOOLTIP_GPIO_IO13</td>
		</tr>

		<tr class="GPIO_IO13 GPIO_item expert">
			<td class="indent2">
				<span class="GPIO_IO13 GPIO_item">GPIO13 Use Interrupt</span>
			</td>
			<td>
					<select id="GPIO_IO13_value2">
						<option value="disabled">disabled</option>
						<option value="rising-edge" disabled>rising edge</option>
						<option value="falling-edge" disabled>falling edge</option>
						<option value="rising-and-falling">rising and falling</option>
						<option value="low-level-trigger">low level trigger</option>
						<option value="high-level-trigger">high level trigger</option>
					</select>	
				</td>
			<td></td>
		</tr>

		<tr class="GPIO_IO13 GPIO_item expert">
			<td class="indent2">
				<span class="GPIO_IO13 GPIO_item">GPIO13 PWM Duty Cycle Resolution</span>
			</td>
			<td><input required type="number" id="GPIO_IO13_value3" min="1" max="20"
					oninput="(!validity.rangeUnderflow||(value=1)) && (!validity.rangeOverflow||(value=20)) && 
						(!validity.stepMismatch||(value=parseInt(this.value)));"><span class="GPIO_IO13 GPIO_item">Bits</span></td>
			<td></td>
		</tr>

		<tr class="GPIO_IO13 GPIO_item expert">
			<td class="indent2">
				<span class="GPIO_IO13 GPIO_item">GPIO13 Enable MQTT</span>
			</td>
			<td><input type="checkbox" id="GPIO_IO13_value4" ></td>
			<td></td>
		</tr>

		<tr class="GPIO_IO13 GPIO_item expert">
			<td class="indent2">
				<span class="GPIO_IO13 GPIO_item">GPIO13 Enable REST API</span>
			</td>
			<td><input type="checkbox" id="GPIO_IO13_value5" ></td>
			<td></td>
		</tr>

		<tr class="GPIO_IO13 GPIO_item expert">
			<td class="indent2">
				<span class="GPIO_IO13 GPIO_item">GPIO13 Name</span>
			</td>
			<td><input type="text" id="GPIO_IO13_value6" ></td>
			<td></td>
		</tr>
		<!-- GPIO13 end -->
	</table>

	
	<!-- Autotimer -->
	<table class="table">
		<colgroup>
			<col span="1" style="width:290px">
			<col span="1" style="width:300px;">
			<col span="1">
		</colgroup>

		<tr>
			<th colspan="3">Auto Timer</th>
		</tr>

		<tr class="expert">
			<td class="indent1">
			    <span id="AutoTimer_AutoStart_text" style="color:black;">Automatic Process Start</span>
			</td>
			<td>
				<select id="AutoTimer_AutoStart_value1">
					<option value="true" selected>true</option>
					<option value="false" >false</option>
				</select>
			</td>
			<td>$TOOLTIP_AutoTimer_AutoStart</td>
		</tr>

		<tr>
			<td class="indent1">
			    <span id="AutoTimer_Interval_text" style="color:black;">Processing Interval</span>
			</td>
			<td>
				<input required type="number" id="AutoTimer_Interval_value1"  min="1" step="any"
					oninput="(!validity.rangeUnderflow||(value=1));">Minutes
			</td>
			<td>$TOOLTIP_AutoTimer_Interval</td>
		</tr>
	</table>


	<!-- Data Logging -->
	<table class="table">
		<colgroup>
			<col span="1" style="width:290px">
			<col span="1" style="width:300px;">
			<col span="1">
		</colgroup>
		<tr>
			<th colspan="3"> Logging</th>
		</tr>

		<tr>
			<td class="indent1">
				<span id="DataLogging_DataLogActive_text" style="color:black;">Data Logging</span>
			</td>
			<td>
				<select id="DataLogging_DataLogActive_value1">
					<option value="true" selected>true</option>
					<option value="false" >false</option>
				</select>
			</td>
			<td>$TOOLTIP_DataLogging_DataLogActive</td>
		</tr>

		<tr>
			<td class="indent1">
				<span id="DataLogging_DataFilesRetention_text" style="color:black;">Data Files Retention</span>
			</td>
			<td>
				<input required type="number" id="DataLogging_DataFilesRetention_value1"  min="0" step="1"
					oninput="(!validity.rangeUnderflow||(value=0)) && (!validity.stepMismatch||(value=parseInt(this.value)));">Days
			</td>
			<td>$TOOLTIP_DataLogging_DataFilesRetention</td>
		</tr>
	</table>


	<!-- Debug Logging -->
	<table class="table">
		<colgroup>
			<col span="1" style="width:290px">
			<col span="1" style="width:300px;">
			<col span="1">
		</colgroup>

		<tr>
			<th colspan="3">Debug</th>
		</tr>

		<tr>
			<td class="indent1">
				<span id="Debug_LogLevel_text" style="color:black;">Log File Log Level</span>
			</td>
			<td>
				<select id="Debug_LogLevel_value1">
					<option value="1">ERROR</option> <!--  matches esp_log_level_t -->
					<option value="2" selected>WARNING</option>
					<option value="3">INFO</option>
					<option value="4">DEBUG</option>
				</select>
			</td>
			<td>$TOOLTIP_Debug_LogLevel</td>
		</tr>

		<tr>
			<td class="indent1">
				<span id="Debug_LogfilesRetention_text" style="color:black;">Log Files Retention</span>
			</td>
			<td>
				<input required type="number" id="Debug_LogfilesRetention_value1"  min="0" step="1"
					oninput="(!validity.rangeUnderflow||(value=0)) && (!validity.stepMismatch||(value=parseInt(this.value)));">Days
			</td>
			<td>$TOOLTIP_Debug_LogfilesRetention</td>
		</tr>

		<tr class="expert">
			<td class="indent1">
				<span id="Debug_DebugFilesRetention_text" style="color:black;">Debug Files Retention</span>
			</td>
			<td>
				<input required type="number" id="Debug_DebugFilesRetention_value1"  min="0" step="1"
					oninput="(!validity.rangeUnderflow||(value=0)) && (!validity.stepMismatch||(value=parseInt(this.value)));">Days
			</td>
			<td>$TOOLTIP_Debug_DebugFilesRetention</td>
		</tr>
	</table>


	<!-- System -->
	<table class="table">
		<colgroup>
			<col span="1" style="width:290px">
			<col span="1" style="width:300px;">
			<col span="1">
		</colgroup>
		<tr>
			<th colspan="3">System</th>
		</tr>

		<tr>
			<td class="indent1">
				<input type="checkbox" id="System_TimeServer_enabled" value="1"  onclick = 'InvertEnableItem("System", "TimeServer")' checked >
				<label for=System_TimeServer_enabled><span id="System_TimeServer_text" style="color:black;">Time Server (NTP)</span></label>
			</td>
			<td>
				<input required type="text" id="System_TimeServer_value1">
			</td>
			<td>$TOOLTIP_System_TimeServer</td>
		</tr>

		<tr>
			<td class="indent1">
				<span id="System_TimeZone_text" style="color:black;">Time Zone</span>
				<p></p><p></p>
			</td>
			<td>
				<input required type="text" id="System_TimeZone_value1">
				<p>Use <a href="timezones.html" target="_blank">timezones</a> to find your settings</p>
			</td>
			<td>$TOOLTIP_System_TimeZone</td>
		</tr>

		<tr class="expert">
			<td class="indent1">
				<span id="System_Hostname_text" style="color:black;">Hostname</span>
			</td>
			<td>
				<input required type="text" id="System_Hostname_value1">
			</td>
			<td>$TOOLTIP_System_Hostname</td>
		</tr>

		<tr class="expert">
			<td class="indent1">
				<input type="checkbox" id="System_RSSIThreshold_enabled" value="1"  onclick = 'InvertEnableItem("System", "RSSIThreshold")'  >
				<label for=System_RSSIThreshold_enabled><span id="System_RSSIThreshold_text" style="color:black;">WIFI Roaming RSSI Threshold</span></label>
			</td>
			<td>
				<input required type="number" name="name" id="System_RSSIThreshold_value1" min="-100" max="0" step="1"
					oninput="(!validity.rangeUnderflow||(value=-100)) && (!validity.rangeOverflow||(value=0)) && 
						(!validity.stepMismatch||(value=parseInt(this.value)));">dBm
			</td>
			<td>$TOOLTIP_System_RSSIThreshold</td>
		</tr>

		<tr class="expert">
			<td class="indent1">
				<span id="System_CPUFrequency_text" style="color:black;">CPU Frequency</span>
			</td>
			<td>
				<select id="System_CPUFrequency_value1">
					<option value="160" selected>160 MHz</option>
					<option value="240">240 MHz</option>
				</select>
			</td>
			<td>$TOOLTIP_System_CPUFrequency</td>
		</tr>

	</table>

	<table style="padding-top:10px">
		<tr>
			<td>
				<button class="button" onclick="saveTextAsFile()">Save And Apply</button>
			</td>
		</tr>
	</table>
</div>


<script src="common.js?v=$COMMIT_HASH"></script> 
<script src="readconfigcommon.js?v=$COMMIT_HASH"></script>  
<script src="readconfigparam.js?v=$COMMIT_HASH"></script>  
<script>
	var canvas = document.getElementById('canvas'),
		domainname = getDomainname(); 
		param;
		category;
		NUNBERSAkt = -1;
		NUMBERS;


	function LoadConfigNeu() {
		if (!loadConfig(domainname)) {
			firework.launch('Configuration could not be loaded! Please reload the page!', 'danger', 30000);
			return;
		}
		ParseConfig();	
		param = getConfigParameters();
		category = getConfigCategory();
		InitIndivParameter();

		UpdateInput();
		var sel = document.getElementById("Numbers_value1");
		UpdateInputIndividual(sel);
		UpdateExpertModus();
		document.getElementById("divall").style.display = ''; 
	}




	function InitIndivParameter()
	{
		NUMBERS = getNumberSequences();

		var _index = document.getElementById("Numbers_value1");
		while (_index.length)
			_index.remove(0);

		var _indexInflux = document.getElementById("NumbersInfluxDBv2_value1");
		while (_indexInflux.length)
			_indexInflux.remove(0);

		var _indexInfluxv1 = document.getElementById("NumbersInfluxDB_value1");
		while (_indexInflux.length)
		_indexInfluxv1.remove(0);

		for (var i = 0; i < NUMBERS.length; ++i){
			var option = document.createElement("option");
			option.text = NUMBERS[i]["name"];
			option.value = i;
			_index.add(option);

			var optionInflux = document.createElement("option");
			optionInflux.text = NUMBERS[i]["name"];
			optionInflux.value = i;
			_indexInflux.add(optionInflux);

			var optionInfluxv1 = document.createElement("option");
			optionInfluxv1.text = NUMBERS[i]["name"];
			optionInfluxv1.value = i;
			_indexInfluxv1.add(optionInfluxv1);

		}
		_index.selectedIndex = 0; 
		_indexInflux.selectedIndex = 0;
		_indexInfluxv1.selectedIndex = 0;
	}


	function getParameterByName(name, url = window.location.href) {
		name = name.replace(/[\[\]]/g, '\\$&');
		var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
			results = regex.exec(url);

		if (!results) return null;
		if (!results[2]) return '';
		return decodeURIComponent(results[2].replace(/\+/g, ' '));
	}	


	// Read parameter out of the variables and display in WebUI config page
	function WriteParameter(_param, _category, _cat, _name, _optional, _number = -1){
		let anzpara;
		try {
			anzpara = _param[_cat][_name].anzParam;	
		}
		catch (error) {
			firework.launch("Parameter '" + _name + "' in category '" + _cat + "' is unknown!", 'danger', 30000);
			return;
		}

		if (_number > -1) {
			if ((NUMBERS[_number] == undefined) || (NUMBERS[_number][_cat] == undefined) ||  (NUMBERS[_number][_cat][_name] == undefined))
				return;

			if (_optional) {
				document.getElementById(_cat+"_"+_name+"_enabled").checked = NUMBERS[_number][_cat][_name]["enabled"];
				for (var j = 1; j <= anzpara; ++j) {
					document.getElementById(_cat+"_"+_name+"_value"+j).disabled = !NUMBERS[_number][_cat][_name]["enabled"];	
				}		
			}
			document.getElementById(_cat+"_"+_name+"_text").style.color = "black"
			setEnabled(_cat+"_"+_name, true);

			for (var j = 1; j <= anzpara; ++j) {
				let element = document.getElementById(_cat+"_"+_name+"_value"+j);
				if (element.tagName.toLowerCase() == "select") {
					var textToFind = NUMBERS[_number][_cat][_name]["value"+j];
					if (textToFind == undefined)
						continue;

					_isFound = false;
					element.selectedIndex = -1;
					for (var i = 0; i < element.options.length; i++) {
						if (element.options[i].value.toLowerCase() === textToFind.toLowerCase()) {
							element.selectedIndex = i;
							_isFound = true;
							break;
						}
					}
					if (!_isFound)
					{
						_zw_txt = "Section '" + _cat + "' / Parameter '" + _name + "': Invalid value: '" + textToFind + "'. Please correct before saving!";
						firework.launch(_zw_txt, 'danger', 30000);
					}
				}
				else if ((element.getAttribute("type") != null) && (element.getAttribute("type").toLowerCase() == "checkbox")) {
					element.checked = NUMBERS[_number][_cat][_name]["value"+j] == "true";
				}
				else {
					element.value = NUMBERS[_number][_cat][_name]["value"+j];
				}
			}
		}
		else {
			if (_optional) {
				document.getElementById(_cat+"_"+_name+"_enabled").checked = _param[_cat][_name]["enabled"];
				for (var j = 1; j <= anzpara; ++j) {
					document.getElementById(_cat+"_"+_name+"_value"+j).disabled = !_param[_cat][_name]["enabled"];	
				}		
			}
			document.getElementById(_cat+"_"+_name+"_text").style.color = "black"
			setEnabled(_cat+"_"+_name, true);

			for (var j = 1; j <= anzpara; ++j) {
				let element = document.getElementById(_cat+"_"+_name+"_value"+j);
				if (element.tagName.toLowerCase() == "select") {
					var textToFind = _param[_cat][_name]["value"+j];
					if (textToFind == undefined)
						continue;
					
					_isFound = false;
					element.selectedIndex = -1;
					for (var i = 0; i < element.options.length; i++) {
						if (element.options[i].value.toLowerCase() === textToFind.toLowerCase()) {
							element.selectedIndex = i;
							_isFound = true;
							break;
						}
					}
					if (!_isFound)
					{
						_zw_txt = "Section '" + _cat + "' / Parameter '" + _name + "': Invalid value: '" + textToFind + "'. Please correct before saving!";
						firework.launch(_zw_txt, 'danger', 30000);
					}
				}
				else if ((element.getAttribute("type") != null) && (element.getAttribute("type").toLowerCase() == "checkbox")) {
					element.checked = _param[_cat][_name]["value"+j] == "true";
				}
				else {
					element.value = _param[_cat][_name]["value"+j];
				}
			}	
		}

		///////////////// am Ende, falls Kategorie als gesamtes nicht ausgewählt --> deaktivieren
		if (_category[_cat]["enabled"] == false) 
		{
			if (_optional) {
				document.getElementById(_cat+"_"+_name+"_enabled").disabled = true;
				for (var j = 1; j <= anzpara; ++j) {
					document.getElementById(_cat+"_"+_name+"_value"+j).disabled = true;
				}	
			}
			document.getElementById(_cat+"_"+_name+"_text").style="color: gray;"
			setEnabled(_cat+"_"+_name, false);
		}

		EnDisableItem(_category[_cat]["enabled"], _param, _category, _cat, _name, _optional, _number);
	}


	function InvertEnableItem(_cat, _param)
	{
		_zw = _cat + "_" + _param + "_enabled";
		_isOn = document.getElementById(_zw).checked;

		_color = "rgb(122, 122, 122)";
		if (_isOn) {
			_color = "black";
		}

		_zw = _cat + "_" + _param + "_text";
		document.getElementById(_zw).disabled = !_isOn;
		document.getElementById(_zw).style.color = _color;

		setEnabled(_cat + "_" + _param, _isOn);

		for (var j = 1; j <= param[_cat][_param]["anzParam"]; ++j) {
				document.getElementById(_cat+"_"+_param+"_value"+j).disabled = !_isOn;	
				document.getElementById(_cat+"_"+_param+"_value"+j).style.color = _color;
		}
	}


	function setEnabled(className, enabled) {
		_color = "rgb(122, 122, 122)";
		if (enabled) {
			_color = "black";
		}

		let elements = document.getElementsByClassName(className);
		for (i = 0; i < elements.length; i++) {
			if (enabled) {
				elements[i].classList.remove("disabled");
			} else {
				elements[i].classList.add("disabled");
			}

			let inputs = elements[i].getElementsByTagName("input");
			for (j = 0; j < inputs.length; j++) {
				if (inputs[j].id.endsWith("_enabled"))
					continue;

				inputs[j].style.color = _color;
				if (enabled) {
					inputs[j].removeAttribute("disabled");
				} else {
					inputs[j].setAttribute("disabled", "disabled");
				}
			}
		}
	}


	function setVisible(className, visible) {
		let elements = document.getElementsByClassName(className);
		for (i = 0; i < elements.length; i++) {
			if (visible) {
				elements[i].classList.remove("hidden");
			} else {
				elements[i].classList.add("hidden");
			}
		}
	}


	function EnDisableItem(_status, _param, _category, _cat, _name, _optional, _number = -1)
	{
		_status = _category[_cat]["enabled"];

		_color = "rgb(122, 122, 122)";
		if (_status) {
			_color = "black";
		}

		if (_optional) {
			document.getElementById(_cat+"_"+_name+"_enabled").disabled = !_status;
			document.getElementById(_cat+"_"+_name+"_enabled").style.color = _color;	
		}

		if (_number == -1){
			if (!_param[_cat][_name]["enabled"]) {
				_status = false;
				_color = "rgb(122, 122, 122)";
			}
		}
		else
			if (!NUMBERS[_number][_cat][_name]["enabled"]) {
					_status = false;
					_color = "rgb(122, 122, 122)";
				}


		document.getElementById(_cat+"_"+_name+"_text").disabled = !_status;
		document.getElementById(_cat+"_"+_name+"_text").style.color = _color;

		setEnabled(_cat+"_"+_name, _status);

		for (var j = 1; j <= _param[_cat][_name]["anzParam"]; ++j) {
				document.getElementById(_cat+"_"+_name+"_value"+j).disabled = !_status;	
				document.getElementById(_cat+"_"+_name+"_value"+j).style.color = _color;	
		}
	}


	// Read parameter from WebUI config page and store in variables
	function ReadParameter(_param, _cat, _name, _optional, _number = -1)
	{
		if (_number > -1) {
			if (_cat == "Digits")
				_cat = "digit";
			if (_cat == "Analog")
				_cat = "analog";

			if ((NUMBERS[_number] == undefined) || (NUMBERS[_number][_cat] == undefined) ||  (NUMBERS[_number][_cat][_name] == undefined))
				return;

			if (_optional) {	// If checkbox is avaiable -> set by selection
				NUMBERS[_number][_cat][_name]["enabled"] = document.getElementById(_cat+"_"+_name+"_enabled").checked;			
			}
			else {				// If no checkbox is available -> always enabled
				NUMBERS[_number][_cat][_name]["enabled"] = true;
			}

			for (var j = 1; j <= _param[_cat][_name]["anzParam"]; ++j) {
				let element = document.getElementById(_cat+"_"+_name+"_value"+j);
				if (element.tagName.toLowerCase() == "select") {
					NUMBERS[_number][_cat][_name]["value"+j] = element.selectedIndex > -1 ? element.options[element.selectedIndex].value : "";
				}
				else if ((element.getAttribute("type") != null) && (element.getAttribute("type").toLowerCase() == "checkbox")) {
					NUMBERS[_number][_cat][_name]["value"+j] = element.checked;
				}
				else {
					if ((NUMBERS[_number][_cat][_name].checkRegExList != null) && (NUMBERS[_number][_cat][_name].checkRegExList[j-1] != null)) {
						if (!element.value.match(NUMBERS[_cat][_name].checkRegExList[j-1])) {
							element.classList.add("invalid-input");
						} else {
							element.classList.remove("invalid-input");
						}
					}
					NUMBERS[_number][_cat][_name]["value"+j] = element.value;
				}
			}
		}
		else
		{	
			if (_optional) {	// If checkbox is avaiable -> set by selection
				_param[_cat][_name]["enabled"] = document.getElementById(_cat+"_"+_name+"_enabled").checked;			
			}
			else {				// If no checkbox is available -> always enabled
				_param[_cat][_name]["enabled"] = true;
			}

			for (var j = 1; j <= _param[_cat][_name]["anzParam"]; ++j) {
				let element = document.getElementById(_cat+"_"+_name+"_value"+j);
				if (element.tagName.toLowerCase() == "select") {
					_param[_cat][_name]["value"+j] = element.selectedIndex > -1 ? element.options[element.selectedIndex].value : "";
				}
				else if ((element.getAttribute("type") != null) && (element.getAttribute("type").toLowerCase() == "checkbox")) {
					_param[_cat][_name]["value"+j] = element.checked;
				}
				else {
					if ((_param[_cat][_name].checkRegExList != null) && (_param[_cat][_name].checkRegExList[j-1] != null)) {
						if (!element.value.match(_param[_cat][_name].checkRegExList[j-1])) {
							element.classList.add("invalid-input");
						} else {
							element.classList.remove("invalid-input");
						}
					}
					_param[_cat][_name]["value"+j] = element.value;
				}
			}		
		}
	}


	function UpdateInputIndividual(sel)
	{
		if (NUNBERSAkt != -1)
		{
			ReadParameter(param, "PostProcessing", "DecimalShift", false, NUNBERSAkt);
			ReadParameter(param, "PostProcessing", "AnalogDigitalTransitionStart", false, NUNBERSAkt);
			ReadParameter(param, "PostProcessing", "MaxRateValue", false, NUNBERSAkt);
			ReadParameter(param, "PostProcessing", "MaxRateType", false, NUNBERSAkt);
			ReadParameter(param, "PostProcessing", "ExtendedResolution", false, NUNBERSAkt);
			ReadParameter(param, "PostProcessing", "IgnoreLeadingNaN", false, NUNBERSAkt);
			ReadParameter(param, "PostProcessing", "AllowNegativeRates", false, NUNBERSAkt);
			ReadParameter(param, "InfluxDB", "Field", false, NUNBERSAkt);
			ReadParameter(param, "InfluxDBv2", "Field", false, NUNBERSAkt);
			ReadParameter(param, "InfluxDB", "Measurement", false, NUNBERSAkt);
			ReadParameter(param, "InfluxDBv2", "Measurement", false, NUNBERSAkt);
		}

	//	var sel = document.getElementById("Numbers_value1");
		NUNBERSAkt = sel.selectedIndex;
		WriteParameter(param, category, "PostProcessing", "DecimalShift", false, NUNBERSAkt);
		WriteParameter(param, category, "PostProcessing", "AnalogDigitalTransitionStart", false, NUNBERSAkt);
		WriteParameter(param, category, "PostProcessing", "MaxRateValue", false, NUNBERSAkt);
		WriteParameter(param, category, "PostProcessing", "MaxRateType", false, NUNBERSAkt);
		WriteParameter(param, category, "PostProcessing", "ExtendedResolution", false, NUNBERSAkt);
		WriteParameter(param, category, "PostProcessing", "IgnoreLeadingNaN", false, NUNBERSAkt);
		WriteParameter(param, category, "PostProcessing", "AllowNegativeRates", false, NUNBERSAkt);
		WriteParameter(param, category, "InfluxDB", "Field", false, NUNBERSAkt);
		WriteParameter(param, category, "InfluxDBv2", "Field", false, NUNBERSAkt);
		WriteParameter(param, category, "InfluxDB", "Measurement", false, NUNBERSAkt);
		WriteParameter(param, category, "InfluxDBv2", "Measurement", false, NUNBERSAkt);
	}


	function UpdateInput() {
		document.getElementById("Category_Digits_enabled").checked = category["Digits"]["enabled"];
		setVisible("DigitItem", category["Digits"]["enabled"]);

		document.getElementById("Category_Analog_enabled").checked = category["Analog"]["enabled"];
		setVisible("AnalogItem", category["Analog"]["enabled"]);

		document.getElementById("Category_MQTT_enabled").checked = category["MQTT"]["enabled"];
		setVisible("MQTTItem", category["MQTT"]["enabled"]);

		document.getElementById("Category_GPIO_enabled").checked = category["GPIO"]["enabled"];
		setVisible("GPIO_item", category["GPIO"]["enabled"]);

		document.getElementById("Category_InfluxDB_enabled").checked = category["InfluxDB"]["enabled"];
		setVisible("InfluxDBv1Item", category["InfluxDB"]["enabled"]);

		document.getElementById("Category_InfluxDBv2_enabled").checked = category["InfluxDBv2"]["enabled"];
		setVisible("InfluxDBv2Item", category["InfluxDBv2"]["enabled"]);

		WriteParameter(param, category, "TakeImage", "RawImagesLocation", true);
		WriteParameter(param, category, "TakeImage", "RawImagesRetention", true);
		WriteParameter(param, category, "TakeImage", "Demo", false);
		WriteParameter(param, category, "TakeImage", "WaitBeforeTakingPicture", false);
		WriteParameter(param, category, "TakeImage", "CameraFrequency", false);
		WriteParameter(param, category, "TakeImage", "ImageQuality", false);
		WriteParameter(param, category, "TakeImage", "Brightness", false);
		WriteParameter(param, category, "TakeImage", "Contrast", false);
		WriteParameter(param, category, "TakeImage", "Saturation", false);
		WriteParameter(param, category, "TakeImage", "LEDIntensity", false);
		WriteParameter(param, category, "TakeImage", "ImageSize", false);
		WriteParameter(param, category, "TakeImage", "FixedExposure", false);

		WriteParameter(param, category, "Alignment", "SearchFieldX", false);		
		WriteParameter(param, category, "Alignment", "SearchFieldY", false);		
		WriteParameter(param, category, "Alignment", "AlignmentAlgo", false);
		WriteParameter(param, category, "Alignment", "FlipImageSize", false);
		WriteParameter(param, category, "Alignment", "InitialRotate", false);
		WriteParameter(param, category, "Alignment", "InitialMirror", false);
		WriteParameter(param, category, "Alignment", "SaveDebugInfo", false);

		WriteParameter(param, category, "Digits", "CNNGoodThreshold", false);
		WriteParameter(param, category, "Digits", "ROIImagesLocation", true);		
		WriteParameter(param, category, "Digits", "ROIImagesRetention", true);		
		
		WriteParameter(param, category, "Analog", "ROIImagesLocation", true);		
		WriteParameter(param, category, "Analog", "ROIImagesRetention", true);		
		
		WriteParameter(param, category, "PostProcessing", "FallbackValueUse", false);		
		WriteParameter(param, category, "PostProcessing", "FallbackValueAgeStartup", false);		
		WriteParameter(param, category, "PostProcessing", "CheckDigitIncreaseConsistency", false);
		WriteParameter(param, category, "PostProcessing", "SaveDebugInfo", false);	

		WriteParameter(param, category, "MQTT", "Uri", false);	
		WriteParameter(param, category, "MQTT", "MainTopic", false);	
		WriteParameter(param, category, "MQTT", "ClientID", false);	
		WriteParameter(param, category, "MQTT", "user", true);	
		WriteParameter(param, category, "MQTT", "password", true);
		WriteParameter(param, category, "MQTT", "TLSEncryption", false);
		WriteParameter(param, category, "MQTT", "TLSCACert", false);
		WriteParameter(param, category, "MQTT", "TLSClientCert", false);
		WriteParameter(param, category, "MQTT", "TLSClientKey", false);
		WriteParameter(param, category, "MQTT", "RetainMessages", false);
		WriteParameter(param, category, "MQTT", "HomeassistantDiscovery", false);
		WriteParameter(param, category, "MQTT", "MeterType", false);
		
		WriteParameter(param, category, "InfluxDB", "Uri", false);	
		WriteParameter(param, category, "InfluxDB", "Database", false);	
		WriteParameter(param, category, "InfluxDB", "user", true);	
		WriteParameter(param, category, "InfluxDB", "password", true);
		WriteParameter(param, category, "InfluxDB", "TLSEncryption", false);
		WriteParameter(param, category, "InfluxDB", "TLSCACert", false);
		WriteParameter(param, category, "InfluxDB", "TLSClientCert", false);
		WriteParameter(param, category, "InfluxDB", "TLSClientKey", false);

		WriteParameter(param, category, "InfluxDBv2", "Uri", false);	
		WriteParameter(param, category, "InfluxDBv2", "Bucket", false);	
		WriteParameter(param, category, "InfluxDBv2", "Org", true);	
		WriteParameter(param, category, "InfluxDBv2", "Token", true);
		WriteParameter(param, category, "InfluxDBv2", "TLSEncryption", false);
		WriteParameter(param, category, "InfluxDBv2", "TLSCACert", false);
		WriteParameter(param, category, "InfluxDBv2", "TLSClientCert", false);
		WriteParameter(param, category, "InfluxDBv2", "TLSClientKey", false);	

		WriteParameter(param, category, "GPIO", "IO0", true);
		WriteParameter(param, category, "GPIO", "IO1", true);
		WriteParameter(param, category, "GPIO", "IO3", true);
		WriteParameter(param, category, "GPIO", "IO4", true);
		WriteParameter(param, category, "GPIO", "IO12", true);
		WriteParameter(param, category, "GPIO", "IO13", true);
		WriteParameter(param, category, "GPIO", "LEDType", false);
		WriteParameter(param, category, "GPIO", "LEDNumbers", false);
		WriteParameter(param, category, "GPIO", "LEDColor", false);

		WriteParameter(param, category, "AutoTimer", "AutoStart", false);	
		WriteParameter(param, category, "AutoTimer", "Interval", false);

		WriteParameter(param, category, "DataLogging", "DataLogActive", false);	
		WriteParameter(param, category, "DataLogging", "DataFilesRetention", false);	

		WriteParameter(param, category, "Debug", "LogLevel", false);
		WriteParameter(param, category, "Debug", "LogfilesRetention", false);
		WriteParameter(param, category, "Debug", "DebugFilesRetention", false);

		WriteParameter(param, category, "System", "TimeServer", true);
		WriteParameter(param, category, "System", "TimeZone", false);
		WriteParameter(param, category, "System", "Hostname", false);
		WriteParameter(param, category, "System", "RSSIThreshold", true);
		WriteParameter(param, category, "System", "CPUFrequency", false);

		WriteModelFiles();

		// Visualize subparameter of a parameter
		setEnabled("MQTT_TLSEncryption_parameter", document.getElementById("MQTT_TLSEncryption_value1").value == "true" ? true : false);
		setEnabled("InfluxDB_TLSEncryption_parameter", document.getElementById("InfluxDB_TLSEncryption_value1").value == "true" ? true : false);
		setEnabled("InfluxDBv2_TLSEncryption_parameter", document.getElementById("InfluxDBv2_TLSEncryption_value1").value == "true" ? true : false);
	}


	function WriteModelFiles()
	{
		var _indexDig = document.getElementById("Digits_Model_value1");
		var _indexAna = document.getElementById("Analog_Model_value1");
		while (_indexDig.length)
			_indexDig.remove(0);
		while (_indexAna.length)
			_indexAna.remove(0);

		for (var i = 0; i < list_tflite.length; ++i) {
			var optionDig = document.createElement("option");
			var optionAna = document.createElement("option");
			
			var text = list_tflite[i].replace("/config/", "");
			
			if (list_tflite[i].includes("/dig")) { // Its a digital file, only show in the digital list box
				optionDig.text = text;
				optionDig.value = list_tflite[i];
				_indexDig.add(optionDig);
			}
			else if (list_tflite[i].includes("/ana")) { // Its a digital file, only show in the analog list box
				optionAna.text = text;
				optionAna.value = list_tflite[i];
				_indexAna.add(optionAna);
			}
			else { // all other files, show in both list boxes
				optionDig.text = text;
				optionDig.value = list_tflite[i];
				_indexDig.add(optionDig);
				
				optionAna.text = text;
				optionAna.value = list_tflite[i];
				_indexAna.add(optionAna);
			}
		}

		WriteParameter(param, category, "Analog", "Model", false);		
		WriteParameter(param, category, "Digits", "Model", false);		
	}


	function ReadParameterAll()
	{
		category["Analog"]["enabled"] = document.getElementById("Category_Analog_enabled").checked;
		category["Digits"]["enabled"] = document.getElementById("Category_Digits_enabled").checked;
		category["MQTT"]["enabled"] = document.getElementById("Category_MQTT_enabled").checked;
		category["InfluxDB"]["enabled"] = document.getElementById("Category_InfluxDB_enabled").checked;
		category["InfluxDBv2"]["enabled"] = document.getElementById("Category_InfluxDBv2_enabled").checked;
		category["GPIO"]["enabled"] = document.getElementById("Category_GPIO_enabled").checked;
		
		ReadParameter(param, "TakeImage", "RawImagesLocation", true);
		ReadParameter(param, "TakeImage", "RawImagesRetention", true);
		ReadParameter(param, "TakeImage", "Demo", false);
		ReadParameter(param, "TakeImage", "WaitBeforeTakingPicture", false);
		ReadParameter(param, "TakeImage", "CameraFrequency", false);
		ReadParameter(param, "TakeImage", "ImageQuality", false);
		ReadParameter(param, "TakeImage", "Brightness", false);
		ReadParameter(param, "TakeImage", "Contrast", false);
		ReadParameter(param, "TakeImage", "Saturation", false);
		ReadParameter(param, "TakeImage", "LEDIntensity", false);
		ReadParameter(param, "TakeImage", "ImageSize", false);
		ReadParameter(param, "TakeImage", "FixedExposure", false);

		ReadParameter(param, "Alignment", "SearchFieldX", false);	
		ReadParameter(param, "Alignment", "SearchFieldY", false);
		ReadParameter(param, "Alignment", "AlignmentAlgo", false);
		ReadParameter(param, "Alignment", "FlipImageSize", false);
		ReadParameter(param, "Alignment", "InitialRotate", false);
		ReadParameter(param, "Alignment", "InitialMirror", false);
		ReadParameter(param, "Alignment", "SaveDebugInfo", false);

		ReadParameter(param, "Digits", "Model", false);
		ReadParameter(param, "Digits", "CNNGoodThreshold", false);
		ReadParameter(param, "Digits", "ROIImagesLocation", true);
		ReadParameter(param, "Digits", "ROIImagesRetention", true);

		ReadParameter(param, "Analog", "Model", false);
		ReadParameter(param, "Analog", "ROIImagesLocation", true);
		ReadParameter(param, "Analog", "ROIImagesRetention", true);

		ReadParameter(param, "PostProcessing", "FallbackValueUse", false);
		ReadParameter(param, "PostProcessing", "FallbackValueAgeStartup", false);
		ReadParameter(param, "PostProcessing", "CheckDigitIncreaseConsistency", false);
		ReadParameter(param, "PostProcessing", "SaveDebugInfo", false);

		ReadParameter(param, "MQTT", "Uri", false);
		ReadParameter(param, "MQTT", "MainTopic", false);
		ReadParameter(param, "MQTT", "ClientID", false);
		ReadParameter(param, "MQTT", "user", true);
		ReadParameter(param, "MQTT", "password", true);
		ReadParameter(param, "MQTT", "TLSEncryption", false);
		ReadParameter(param, "MQTT", "TLSCACert", false);
		ReadParameter(param, "MQTT", "TLSClientCert", false);
		ReadParameter(param, "MQTT", "TLSClientKey", false);
		ReadParameter(param, "MQTT", "RetainMessages", false);
		ReadParameter(param, "MQTT", "HomeassistantDiscovery", false);
		ReadParameter(param, "MQTT", "MeterType", false);

		ReadParameter(param, "InfluxDB", "Uri", false);
		ReadParameter(param, "InfluxDB", "Database", false);
		ReadParameter(param, "InfluxDB", "user", true);
		ReadParameter(param, "InfluxDB", "password", true);
		ReadParameter(param, "InfluxDB", "TLSEncryption", false);
		ReadParameter(param, "InfluxDB", "TLSCACert", false);
		ReadParameter(param, "InfluxDB", "TLSClientCert", false);
		ReadParameter(param, "InfluxDB", "TLSClientKey", false);

		ReadParameter(param, "InfluxDBv2", "Uri", false);
		ReadParameter(param, "InfluxDBv2", "Bucket", false);
		ReadParameter(param, "InfluxDBv2", "Org", true);
		ReadParameter(param, "InfluxDBv2", "Token", true);
		ReadParameter(param, "InfluxDBv2", "TLSEncryption", false);
		ReadParameter(param, "InfluxDBv2", "TLSCACert", false);
		ReadParameter(param, "InfluxDBv2", "TLSClientCert", false);
		ReadParameter(param, "InfluxDBv2", "TLSClientKey", false);

		ReadParameter(param, "GPIO", "IO0", true);
		ReadParameter(param, "GPIO", "IO1", true);
		ReadParameter(param, "GPIO", "IO3", true);
		ReadParameter(param, "GPIO", "IO4", true);
		ReadParameter(param, "GPIO", "IO12", true);
		ReadParameter(param, "GPIO", "IO13", true);
		ReadParameter(param, "GPIO", "LEDType", false);
		ReadParameter(param, "GPIO", "LEDNumbers", false);
		ReadParameter(param, "GPIO", "LEDColor", false);
		// Folgende Zeilen sind für Abwärtskompatibität < v9.0.0 notwendig (manchmal parameter auskommentiert)
		param["GPIO"]["LEDType"]["enabled"] = true;
		param["GPIO"]["LEDNumbers"]["enabled"] = true;
		param["GPIO"]["LEDColor"]["enabled"] = true;
		param["GPIO"]["LEDType"]["found"] = true;
		param["GPIO"]["LEDNumbers"]["found"] = true;
		param["GPIO"]["LEDColor"]["found"] = true;

		ReadParameter(param, "AutoTimer", "AutoStart", false);
		ReadParameter(param, "AutoTimer", "Interval", false);
		
		ReadParameter(param, "DataLogging", "DataLogActive", false);
		ReadParameter(param, "DataLogging", "DataFilesRetention", false);

		ReadParameter(param, "Debug", "LogLevel", false);
		ReadParameter(param, "Debug", "LogfilesRetention", false);
		ReadParameter(param, "Debug", "DebugFilesRetention", false);

		ReadParameter(param, "System", "TimeServer", true);
		ReadParameter(param, "System", "TimeZone", false);
		ReadParameter(param, "System", "Hostname", false);
		ReadParameter(param, "System", "RSSIThreshold", true);
		ReadParameter(param, "System", "CPUFrequency", false);

		var sel = document.getElementById("Numbers_value1");
		UpdateInputIndividual(sel);
	}


	function FormatDecimalValue(_param, _cat, _name) {
		for (var j = 1; j <= _param[_cat][_name]["anzParam"]; ++j) {
			var _val = _param[_cat][_name]["value"+j];
			_val = _val.replace(",", ".");
			_param[_cat][_name]["value"+j] = _val;
		}
	}


	function UpdateAfterCategoryCheck() {
		ReadParameterAll();
		category["Analog"]["enabled"] = document.getElementById("Category_Analog_enabled").checked;
		category["Digits"]["enabled"] = document.getElementById("Category_Digits_enabled").checked;
		category["MQTT"]["enabled"] = document.getElementById("Category_MQTT_enabled").checked;
		category["InfluxDB"]["enabled"] = document.getElementById("Category_InfluxDB_enabled").checked;
		category["InfluxDBv2"]["enabled"] = document.getElementById("Category_InfluxDBv2_enabled").checked;
		category["GPIO"]["enabled"] = document.getElementById("Category_GPIO_enabled").checked;

		UpdateInput();
		var sel = document.getElementById("Numbers_value1");
		UpdateInputIndividual(sel);
	}


	function UpdateExpertModus()
	{
	//	var _style = 'display:none;';
		var _style_pur = 'none';
		var _hidden = true;
		if (document.getElementById("ExpertModus_enabled").checked) {
	//		_style = '';
			_style_pur = '';
			_hidden = false;
			document.getElementById("Edit_Config_Direct").style.display = "";
			firework.launch("Expert view activated. Please use wisely", 'warning', 3000, true);
		}
		else
		{
			document.getElementById("Edit_Config_Direct").style.display = "none"; 
		}

		const expert = document.querySelectorAll(".expert");
		for (var i = 0; i < expert.length; i++) {
			expert[i].style.display = _style_pur;
	//		document.getElementById(expert[i].id).style = _style;
		}

		// Enable / Disable die Optionen in den Menues für die Auswahl. Falls kein Expertenmodus soll nur ein Wert (built-in-led oder externan-flash-ws281x) möglich sein
		Array.from(document.querySelector("#GPIO_IO4_value1").options).forEach(function(option_element) {
			if (option_element.value != "built-in-led")
				option_element.hidden = _hidden;
		});	

		Array.from(document.querySelector("#GPIO_IO12_value1").options).forEach(function(option_element) {
			if (option_element.value != "external-flash-ws281x")
				option_element.hidden = _hidden;
		});
	}


	function saveTextAsFile()
	{
		ReadParameterAll();
		if (document.getElementsByClassName("invalid-input").length > 0) {
			firework.launch("Settings cannot be saved. Please check your entries!", 'danger', 30000);
			return;
		}

		if (confirm("Are you sure you want to save the configuration?")) {
			ReadParameterAll();
			WriteConfigININew();
			SaveConfigToServer(domainname);

			firework.launch('Save and apply configuration...', 'success', 2000, true);
			setTimeout(function() {
				reload_config();
			}, 200);    
		}
	}


	function editConfigDirect() {
		if (confirm("Proceed to switch the view? Unsaved changes get lost")) {
			var stringota = getDomainname() + "/edit_config.html?v=$COMMIT_HASH";
			window.location = stringota;
			window.location.href = stringota;
			window.location.assign(stringota);
			window.location.replace(stringota);
		}	
	}


	function numberChanged()
	{
		var sel = document.getElementById("Numbers_value1");
		_neu = sel.selectedIndex;
		UpdateInputIndividual(sel);
	}


	function numberInfluxDBChanged()
	{
		var sel = document.getElementById("NumbersInfluxDB_value1");
		_neu = sel.selectedIndex;
		UpdateInputIndividual(sel);
	}


	function numberInfluxDBv2Changed()
	{
		var sel = document.getElementById("NumbersInfluxDBv2_value1");
		_neu = sel.selectedIndex;
		UpdateInputIndividual(sel);
	}


	/* hash #description open the details part of the page */
	function openDescription() 
	{
		if(window.location.hash) {
			var hash = window.location.hash.substring(1); //Puts hash in variable, and removes the # character
			if(hash == 'description')
				document.getElementById("desc_details").open = true;
		}
	}

	openDescription();
	fetchTFLITEList();
	LoadConfigNeu();

</script>
	
</body>
</html>
